@using MonPDReborn.Models.DataOP
@model ProfilePotensiOPVM.DetailPotensiPajakHotel

@{
    Layout = "_Layout";
    ViewBag.Title = "Detail Potensi Pajak Hotel";

}

<div class="row">

    <div class="col-lg-12">
        <div class="card border border-info border-2">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <div class="d-flex p-3">
                            <div class="flex-shrink-0">
                                <div class="avatar-md me-3">
                                    <span class="avatar-title bg-soft-info border border-2 border-info rounded-circle fs-1">
                                        <i class="ri-hotel-line text-info"></i>
                                    </span>
                                </div>
                            </div>
                            <div class="mt-1">
                                <h4 class="fs-16 fw-semibold text-dark">
                                    @Model.Nama
                                </h4>
                                <p class="fs-16 lh-base text-dark mb-1">
                                    @Model.Alamat
                                </p>
                                <p class="fs-16 text-dark">
                                    @Model.FormattedNOP
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card border border-info border-2">
                            <div class="card-body bg-info bg-opacity-25">
                                <h4 class="card-title fs-14 mb-4 fw-bold text-dark">
                                    Potensi Pajak
                                </h4>
                                <div class="d-flex p-3 py-0">
                                    <p class="fs-14 text-muted flex-grow-1">Per Bulan</p>
                                    <div class="flex-shrink-0">
                                        <p class="fs-16 fw-semibold text-dark">Rp. @Model.PotensiPajakPerBulan.ToString("N0")</p>
                                    </div>
                                </div>
                                <div class="d-flex p-3 py-0">
                                    <p class="fs-14 text-muted flex-grow-1">Per Tahun</p>
                                    <div class="flex-shrink-0">
                                        <p class="fs-16 fw-semibold text-dark">Rp. @Model.PotensiPajakPerTahun.ToString("N0")</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-8">

        <div class="card">
            <div class="card-header d-flex bg-soft-info">
                <h4 class="card-title fs-16 mb-0 text-dark">
                    Detail Kamar Hotel
                </h4>
            </div>
            <div class="card-body">
                <div class="row">

                    <div class="col-lg-8">
                        <div class="card h-100">
                            <div class="card-body">
                                <p class="fs-14 fw-semibold mb-1">Tingkat Hunian Kamar</p>
                                <div class="progress" style="height:20px">
                                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                         style="width: @((Model.OkupansiRateRoom*100).ToString("F0"))%;"
                                         aria-valuenow="@((Model.OkupansiRateRoom*100).ToString("F0"))">
                                        @((Model.OkupansiRateRoom * 100).ToString("N0"))%
                                    </div>
                                </div>
                                <br />
                                <div class="d-flex">
                                    <p class="fs-14 text-muted flex-grow-1">Jumlah Kamar</p>
                                    <div class="flex-shrink-0"><p class="fs-14 fw-semibold">@Model.JumlahTotalRoom.ToString("N0")</p></div>
                                </div>
                                <div class="d-flex">
                                    <p class="fs-14 text-muted flex-grow-1">Tarif Rata-rata Kamar</p>
                                    <div class="flex-shrink-0"><p class="fs-14 fw-semibold">Rp. @Math.Ceiling(Model.HargaRataRataRoom).ToString("N0")</p></div>
                                </div>
                                <div class="d-flex">
                                    <p class="fs-14 text-muted flex-grow-1">Rata-rata Kamar Terjual</p>
                                    <div class="flex-shrink-0"><p class="fs-14 fw-semibold">@Math.Ceiling(Model.RataRataRoomTerjualPerHari).ToString("N0")</p></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <div class="card border border-info border-2 h-100">
                            <div class="card-body bg-soft-info bg-opacity-25 d-flex flex-column justify-content-center text-center">
                                <h5 class="fs-16 fw-semibold">Omzet per Bulan (Kamar)</h5>
                                <h3 class="fs-22 fw-bold my-3 tex-dark">
                                    Rp. @Model.PotensiOmzetRoomPerBulan.ToString("N0")
                                </h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="card border border-info border-2 mt-3">
                            <div class="card-body">
                                <h4 class="fs-16 fw-semibold mb-2 text-dark">Perhitungan Rata-rata Room Terjual per Hari</h4>
                                <p class="fs-14 text-muted mb-1 font-monospace">
                                    Jumlah Total Room x Okupansi Rate Room
                                </p>
                                <p class="fs-14 fw-semibold text-dark mb-3">
                                    @Model.JumlahTotalRoom.ToString("N0") x @Model.OkupansiRateRoom.ToString("P0") = @Math.Ceiling(Model.RataRataRoomTerjualPerHari).ToString("N0")
                                </p>

                                <hr>

                                <h4 class="fs-16 fw-semibold mb-2 text-dark">Perhitungan Omzet Kamar per Bulan</h4>
                                <p class="fs-14 text-muted mb-1 font-monospace">
                                    Harga Rata-rata Room x Rata-rata Room Terjual/Hari x 30 Hari
                                </p>
                                <p class="fs-14 fw-semibold text-dark">
                                    Rp. @Math.Ceiling(Model.HargaRataRataRoom).ToString("N0") x @Math.Ceiling(Model.RataRataRoomTerjualPerHari).ToString("N0") x 30 = Rp. @Model.PotensiOmzetRoomPerBulan.ToString("N0")
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="col-lg-4">

        <div class="card">
            <div class="card-header d-flex bg-soft-info">
                <div class="flex-grow-1">
                    <h4 class="card-title fs-16 mb-0 text-dark">
                        Ringkasan
                    </h4>
                </div>
            </div>
            <div class="card-body">
                <div class="d-flex mb-2">
                    <p class="label">NOP</p>
                    <p class="value">@Model.FormattedNOP</p>
                </div>
                <div class="d-flex mb-2">
                    <p class="label">Nama Hotel</p>
                    <p class="value">@Model.Nama</p>
                </div>
                <div class="d-flex mb-2">
                    <p class="label">Alamat</p>
                    <p class="value">@Model.Alamat</p>
                </div>

                <hr class="my-2" />

                <div class="d-flex mb-2">
                    <p class="label">Jumlah Kamar</p>
                    <p class="value">@Model.JumlahTotalRoom Kamar</p>
                </div>
                <div class="d-flex mb-2">
                    <p class="label">Kapasitas Banquet</p>
                    <p class="value">@Model.KapasitasMaksimalPaxBanquetPerHari</p>
                </div>

            </div>
        </div>

        @* <div class="card">
            <div class="card-header d-flex bg-soft-info">
                <div class="flex-grow-1">
                    <h4 class="card-title fs-16 mb-0">
                        Potensi Pajak
                    </h4>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card border border-info border-2">
                            <div class="card-body bg-soft-info bg-opacity-25 text-center">
                                <h5 class="card-title fs-14 mb-3">
                                    Potensi Pajak per Bulan
                                </h5>
                                <h4 class="card-title fs-22 fw-bold text-dark mb-0">
                                    Rp. @Model.PotensiPajakPerBulan.ToString("N0")
                                </h4>
                                <p class="fs-12 text-muted mt-1">Total Pajak Kamar dan Banquet</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="card border border-info border-2">
                            <div class="card-body bg-soft-info bg-opacity-25 text-center">
                                <h5 class="card-title fs-14 mb-3">
                                    Potensi Pajak per Tahun
                                </h5>
                                <h4 class="card-title fs-22 fw-bold text-dark mb-0">
                                    Rp. @Model.PotensiPajakPerTahun.ToString("N0")
                                </h4>
                                <p class="fs-12 text-muted mt-1">Proyeksi untuk 12 bulan</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> *@

        <div class="card">
            <div class="card-header d-flex bg-soft-info">
                <div class="flex-grow-1">
                    <h4 class="card-title fs-16 mb-0 text-dark">
                        Parameter Perhitungan
                    </h4>
                </div>
            </div>
            <div class="card-body">
                <div class="info-row">
                    <p class="label">Tingkat Hunian Kamar</p>
                    <p class="value">@Model.OkupansiRateRoom.ToString("P0")</p>
                </div>
                <div class="info-row">
                    <p class="label">Tingkat Okupansi Banquet</p>
                    <p class="value">@Model.OkupansiRateBanquet.ToString("P0")</p>
                </div>
                <div class="info-row">
                    <p class="label">Tarif Pajak</p>
                    <p class="value">@Model.TarifPajak.ToString("P0")</p>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-12">
        @if (Model.KapasitasMaksimalPaxBanquetPerHari > 0)
        {

            <div class="card">
                <div class="card-header d-flex bg-soft-info">
                    <h4 class="card-title fs-16 mb-0 text-dark">
                        Detail Banquet Hotel
                    </h4>
                </div>
                <div class="card-body">
                    <div class="row">

                        <div class="col-lg-8">
                            <div class="card h-100">
                                <div class="card-body">
                                    <p class="fs-14 fw-semibold mb-1">Detail Banquet</p>
                                    <div class="progress" style="height:20px">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                             style="width: @((Model.OkupansiRateBanquet * 100).ToString("F0"))%;"
                                             aria-valuenow="@((Model.OkupansiRateBanquet * 100).ToString("F0"))">
                                            @((Model.OkupansiRateBanquet * 100).ToString("N0"))%
                                        </div>
                                    </div>
                                    <br />
                                    <div class="d-flex">
                                        <p class="fs-14 text-muted flex-grow-1">Kapasitas Banquet</p>
                                        <div class="flex-shrink-0"><p class="fs-14 fw-semibold">@Model.KapasitasMaksimalPaxBanquetPerHari.ToString("N0")</p></div>
                                    </div>
                                    <div class="d-flex">
                                        <p class="fs-14 text-muted flex-grow-1">Tarif Rata-rata Banquet</p>
                                        <div class="flex-shrink-0"><p class="fs-14 fw-semibold">Rp. @Math.Ceiling(Model.HargaRataRataBanquetPerPax).ToString("N0")</p></div>
                                    </div>
                                    <div class="d-flex">
                                        <p class="fs-14 text-muted flex-grow-1">Rata-rata Banquet Terjual</p>
                                        <div class="flex-shrink-0"><p class="fs-14 fw-semibold">@Math.Ceiling(Model.RataRataPaxBanquetTerjualPerHari).ToString("N0")</p></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4">
                            <div class="card border border-info border-2 h-100">
                                <div class="card-body bg-soft-info bg-opacity-25 d-flex flex-column justify-content-center text-center">
                                    <h5 class="fs-16 fw-semibold">Omzet per Bulan (Banquet)</h5>
                                    <h3 class="fs-22 fw-bold my-3 text-dark">
                                        Rp. @Model.PotensiOmzetBanquetPerBulan.ToString("N0")
                                    </h3>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="card border border-info border-2 mt-3">
                                <div class="card-body">
                                    <h4 class="fs-16 fw-semibold mb-2">Perhitungan Rata-rata Pax Banquet Terjual per Hari</h4>
                                    <p class="fs-14 text-muted mb-1 font-monospace">
                                        Kapasitas Maksimum Pax Banquet/Hari x Okupansi Rate Banquet
                                    </p>
                                    <p class="fs-14  mb-3 fw-semibold text-dark">
                                        @Model.KapasitasMaksimalPaxBanquetPerHari.ToString("N0") x @Model.OkupansiRateBanquet.ToString("P2") = @(Math.Ceiling(Model.RataRataPaxBanquetTerjualPerHari).ToString("N0"))
                                    </p>

                                    <hr>

                                    <h4 class="fs-16 fw-semibold mb-2">Perhitungan Omzet Banquet per Bulan</h4>
                                    <p class="fs-14 text-muted mb-1 font-monospace">
                                        Harga Rata-rata Banquet/Pax x Rata-rata Pax Terjual/Hari x 8 Hari
                                    </p>
                                    <p class="fs-14 fw-semibold text-dark">
                                        Rp. @Math.Ceiling(Model.HargaRataRataBanquetPerPax).ToString("N0") x @Math.Ceiling(Model.RataRataPaxBanquetTerjualPerHari).ToString("N0") x 8 = Rp. @Model.PotensiOmzetBanquetPerBulan.ToString("N0")
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        }

        <div class="card">
            <div class="accordion" id="accordionPotensiPajakHotel">

            <!-- Accordion Tunggal -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingPotensiHotel">
                        <button class="accordion-button collapsed bg-soft-info text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePotensiHotel" aria-expanded="false" aria-controls="collapsePotensiHotel">
                            Rumus Lengkap Perhitungan Potensi Pajak Hotel
                        </button>
                    </h2>
                    <div id="collapsePotensiHotel" class="accordion-collapse collapse" aria-labelledby="headingPotensiHotel" data-bs-parent="#accordionPotensiPajakHotel">
                        <div class="accordion-body">

                            <!-- Perhitungan Omzet Room & Banquet -->
                            <h4 class="fs-16 fw-semibold mb-3">Perhitungan Omzet Room & Banquet</h4>

                            <p class="fs-14 text-muted font-monospace mb-1">
                                Rata-Rata Room Terjual/Hari = Jumlah Total Room × Okupansi Rate Room
                            </p>
                            <p class="fs-14 mb-2 fw-semibold text-dark">
                                = @Model.JumlahTotalRoom.ToString("N0") × @Model.OkupansiRateRoom.ToString("P0") = @Math.Ceiling(Model.RataRataRoomTerjualPerHari).ToString("N0") room/hari
                            </p>

                            <p class="fs-14 text-muted font-monospace mb-1">
                                Potensi Omzet/Bulan atas Room = Harga Rata-Rata Room × Rata-Rata Room Terjual/Hari × 30 Hari
                            </p>
                            <p class="fs-14 mb-2 fw-semibold text-dark">
                                = Rp. @Math.Ceiling(Model.HargaRataRataRoom).ToString("N0") × @Math.Ceiling(Model.RataRataRoomTerjualPerHari).ToString("N0") × 30 = Rp. @Model.PotensiOmzetRoomPerBulan.ToString("N0")
                            </p>

                            @if (Model.KapasitasMaksimalPaxBanquetPerHari > 0)
                            {
                                <p class="fs-14 text-muted font-monospace mb-1">
                                    Okupansi Rate Banquet = 30% × Okupansi Rate Room
                                </p>
                                <p class="fs-14 mb-2 fw-semibold text-dark">
                                    = 30% × @Model.OkupansiRateRoom.ToString("P0") = @Model.OkupansiRateBanquet.ToString("P0")
                                </p>

                                <p class="fs-14 text-muted font-monospace mb-1">
                                    Rata-Rata Pax Banquet Terjual/Hari = Kapasitas Maksimal Pax Banquet/Hari × Okupansi Rate Banquet
                                </p>
                                <p class="fs-14 mb-2 fw-semibold text-dark">
                                    = @Model.KapasitasMaksimalPaxBanquetPerHari.ToString("N0") × @Model.OkupansiRateBanquet.ToString("P0") = @Math.Ceiling(Model.RataRataPaxBanquetTerjualPerHari).ToString("N0") pax/hari
                                </p>

                                <p class="fs-14 text-muted font-monospace mb-1">
                                    Potensi Omzet/Bulan atas Banquet = Harga Rata-Rata Banquet/Pax × Rata-Rata Pax Banquet Terjual/Hari × 8 Hari
                                </p>
                                <p class="fs-14 mb-3 fw-semibold text-dark">
                                    = Rp. @Math.Ceiling(Model.HargaRataRataBanquetPerPax).ToString("N0") × @Math.Ceiling(Model.RataRataPaxBanquetTerjualPerHari).ToString("N0") × 8 = Rp. @Model.PotensiOmzetBanquetPerBulan.ToString("N0")
                                </p>
                            }
                            <hr>

                            <!-- Perhitungan Potensi Pajak -->
                            <h4 class="fs-16 fw-semibold mb-3">Perhitungan Potensi Pajak</h4>

                            <p class="fs-14 text-muted font-monospace mb-1">
                                Potensi Pajak/Bulan = (Potensi Omzet Room + Potensi Omzet Banquet) × Tarif Pajak
                            </p>
                            <p class="fs-14 mb-2 fw-semibold text-dark">
                                = (Rp. @Model.PotensiOmzetRoomPerBulan.ToString("N0") + Rp. @Model.PotensiOmzetBanquetPerBulan.ToString("N0")) × @Model.TarifPajak.ToString("P0") = Rp. @Model.PotensiPajakPerBulan.ToString("N0")
                            </p>

                            <p class="fs-14 text-muted font-monospace mb-1">
                                Potensi Pajak/Tahun = Potensi Pajak/Bulan × @Model.BulanSisa Bulan
                            </p>
                            <p class="fs-14 fw-semibold text-dark">
                                = Rp. @Model.PotensiPajakPerBulan.ToString("N0") × @Model.BulanSisa = Rp. @Model.PotensiPajakPerTahun.ToString("N0")
                            </p>

                        </div>
                    </div>
                </div>

            </div>
        </div>


    </div>
</div>
