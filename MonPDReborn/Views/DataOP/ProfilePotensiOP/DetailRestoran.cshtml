@model MonPDReborn.Models.DataOP.ProfilePotensiOPVM.DetailPotensiPajakResto

@{
    Layout = "_Layout";
    ViewBag.Title = "Detail Potensi Pajak Restoran";
}
<style>
    .bg-red-bright {
        background-color: #FFE5E5; 
        color: #5C0000; 
    }

    .bg-red-light {
        background-color: #FFF5F5;
    }

    .text-red {
        color: #D62828; 
    }

    .border-red {
        border: 2px solid #D62828;
    }

    .card-red-bright {
        background-color: #FFD6D6; color: #5C0000;
        border: 2px solid #D62828;
        border-radius: 8px;
        /* box-shadow: 0 4px 16px rgba(214, 40, 40, 0.3); */
    }

    .card-red-light {
        background-color: #FFEAEA;
        color: #5C0000;
        border: 2px solid #FF6B6B;
        border-radius: 8px;
        /* box-shadow: 0 4px 16px rgba(255, 107, 107, 0.3); */
    }

    .progress-bar-primary-red {
        background-color: #FF6B6B;
    }

    .progress-bar-secondary-red {
        background-color: #FFC4C4;
    }

    .progress-bar-danger-red {
        background-color: #D62828;
    }

    
</style>
@if (Model != null)
{
    <div class="row">
        <div class="col-lg-12">
            <div class="card border-red">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-lg-8">
                            <div class="d-flex p-3">
                                <div class="flex-shrink-0">
                                    <div class="avatar-md me-3">
                                        <span class="avatar-title bg-red-light border-red rounded-circle fs-1">
                                            <i class="ri-restaurant-line text-red"></i>
                                        </span>
                                    </div>
                                </div>
                                <div class="mt-1">
                                    <h4 class="fs-16 fw-semibold text-dark">
                                        @Model.Nama
                                    </h4>
                                    <p class="fs-16 lh-base text-dark mb-1">
                                        @Model.Alamat
                                    </p>
                                    <p class="fs-16 text-dark">
                                        @Model.FormattedNOP
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card-red-bright">
                                <div class="d-flex p-3">
                                    <h3 class="fs-16 fw-semibold text-dark">
                                        Potensi Pajak
                                    </h3>
                                </div>
                                <div class="d-flex p-3 py-0">
                                    <p class="fs-14 text-dark flex-grow-1">Per Bulan</p>
                                    <div class="flex-shrink-0">
                                        <p class="fs-16 fw-semibold text-dark">Rp. @Model.PotensiPajakPerBulanNonCatering.ToString("N0")</p>
                                    </div>
                                </div>
                                <div class="d-flex p-3 py-0">
                                    <p class="fs-14 text-dark flex-grow-1">Per Tahun</p>
                                    <div class="flex-shrink-0">
                                        <p class="fs-16 fw-semibold text-dark">Rp. @Model.PotensiPajakPerTahunNonCatering.ToString("N0")</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-8">
            <div class="card">
                <div class="card-header d-flex bg-red-bright">
                    <div class="flex-grow-1">
                        <h4 class="card-title fs-16 mb-0 text-dark">
                            Detail Pengunjung Restoran
                        </h4>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">

                        <div class="col-lg-6 p-3">
                            <div class="card-red-light">
                                <div class="card-body">
                                    <div class="text-center">
                                        <h3 class="fs-18 fw-bold mb-1 text-dark">
                                            @Math.Ceiling(Model.RataRataPengunjungWeekdaysNonCatering).ToString("N0")
                                        </h3>
                                        <h4 class="fs-14 text-dark">
                                            Rata-rata Pengunjung Weekdays
                                        </h4>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6 p-3">
                            <div class="card-red-bright">
                                <div class="card-body">
                                    <div class="text-center">
                                        <h3 class="fs-18 fw-bold mb-1 text-dark">
                                            @Math.Ceiling(Model.RataRataPengunjungWeekendNonCatering).ToString("N0")
                                        </h3>
                                        <h4 class="fs-14 text-dark">
                                            Rata-rata Pengunjung Weekend
                                        </h4>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="d-flex p-3 py-0">
                                <p class="fs-14 text-muted flex-grow-1">Rata-rata Transaksi per Orang</p>
                                <div class="flex-shrink-0">
                                    <p class="fs-14 fw-semibold">Rp. @Math.Ceiling(Model.RataRataBillPerOrang).ToString("N0")</p>
                                </div>
                            </div>
                            <div class="d-flex p-3 py-0">
                                <p class="fs-14 text-muted flex-grow-1">Turnover Weekdays</p>
                                <div class="flex-shrink-0">
                                    <p class="fs-14 fw-semibold">@Model.TurnoverWeekdaysNonCatering.ToString("N2") Kali</p>
                                </div>
                            </div>
                            <div class="d-flex p-3 py-0">
                                <p class="fs-14 text-muted flex-grow-1">Turnover Weekend</p>
                                <div class="flex-shrink-0">
                                    <p class="fs-14 fw-semibold">@Model.TurnoverWeekendNonCatering.ToString("N2") Kali</p>
                                </div>
                            </div>
                        </div>

                        @* <div class="col-lg-6">
                            <div class="card border-red">
                                <div class="card-body">
                                    <h4 class="fs-14 fw-semibold mb-2">
                                        Distribusi Pengunjung
                                    </h4>
                                    <div class="d-flex p-0 py-0">
                                        <p class="fs-14 text-muted flex-grow-1">Weekdays (22 hari/bulan)</p>
                                        <div class="flex-shrink-0">
                                            <p class="fs-14 fw-semibold">@Model.RataRataPengunjungWeekdaysNonCatering.ToString("N0") Pengunjung</p>
                                        </div>
                                    </div>
                                    
                                    <div class="progress mb-4" style="height:20px">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated progress-bar-secondary-red text-dark"
                                             role="progressbar"
                                             aria-valuenow="@pengunjungWeekdaysProgress"
                                             aria-valuemin="0"
                                             aria-valuemax="@totalPengunjung"
                                             style="width: @pengunjungWeekdaysProgress%">
                                            @pengunjungWeekdaysProgress%
                                        </div>
                                    </div>
                                    <div class="d-flex p-0 py-0">
                                        <p class="fs-14 text-muted flex-grow-1">Weekend (8 Hari/bulan)</p>
                                        <div class="flex-shrink-0">
                                            <p class="fs-14 fw-semibold">@Model.RataRataPengunjungWeekendNonCatering.ToString("N0") Pengunjung</p>
                                        </div>
                                    </div>
                                    <div class="progress mb-4" style="height:20px">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated progress-bar-primary-red text-dark"
                                             role="progressbar"
                                             aria-valuenow="@pengunjungWeekendProgress"
                                             aria-valuemin="0"
                                             aria-valuemax="@totalPengunjung"
                                             style="width: @pengunjungWeekendProgress%">
                                            @pengunjungWeekendProgress%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> *@
                        @{
                            decimal pengunjungTotalWeekdays = (Model.RataRataPengunjungWeekdaysNonCatering * 22);
                            decimal pengunjungTotalWeekend = (Model.RataRataPengunjungWeekendNonCatering * 8);
                            decimal totalPengunjung = Model.TotalPengunjungWeekendNonCatering + Model.TotalPengunjungWeekendNonCatering;

                            var pengunjungWeekdaysProgress = (totalPengunjung == 0 ? 0 : pengunjungTotalWeekdays / totalPengunjung * 100)
                            .ToString("0.##", System.Globalization.CultureInfo.InvariantCulture);

                            var pengunjungWeekendProgress = (totalPengunjung == 0 ? 0 : pengunjungTotalWeekend / totalPengunjung * 100)
                            .ToString("0.##", System.Globalization.CultureInfo.InvariantCulture);
                        }
                        <div class="col-lg-12">
                            <div class="card border border-danger border-2">
                                <div class="card-body bg-light bg-opacity-25">
                                    <h4 class="fs-16 fw-bold mb-2">
                                        Total Pengunjung Weekdays per Bulan :
                                    </h4>
                                    <p class="fs-14 text-muted font-monospace mb-1">
                                        Rata-rata Pengunjung Weekdays x 22 Hari
                                    </p>
                                    <p class="fs-14 fw-semibold mb-2 text-dark">
                                        @Math.Ceiling(Model.RataRataPengunjungWeekdaysNonCatering).ToString("N0") x 22 = @Model.TotalPengunjungWeekdaysNonCatering.ToString("N0") Pengunjung
                                    </p>
                                    <h4 class="fs-16 fw-semibold  mb-1">
                                        Total Pengunjung Weekend per Bulan :
                                    </h4>
                                    <p class="fs-14 text-muted font-monospace mb-1">
                                        Rata-rata Pengunjung Weekend x 8 Hari
                                    </p>
                                    <p class="fs-14 fw-semibold mb-2 text-dark">
                                        @Math.Ceiling(Model.RataRataPengunjungWeekendNonCatering).ToString("N0") x 8 = @Model.TotalPengunjungWeekendNonCatering.ToString("N0") Pengunjung
                                    </p>
                                    <h4 class="fs-16 fw-bold mb-1">
                                        Total Pengunjung per Bulan :
                                    </h4>
                                    <p class="fs-14 fw-semibold text-dark">
                                        @Model.TotalPengunjungWeekdaysNonCatering.ToString("N0") + @Model.TotalPengunjungWeekendNonCatering.ToString("N0") = @Math.Ceiling(totalPengunjung).ToString("N0") Pengunjung
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>

        <div class="col-lg-4">
            <div class="card">
                <div class="card-header d-flex bg-red-bright">
                    <div class="flex-grow-1">
                        <h4 class="card-title fs-16 mb-0 text-dark">
                            Ringkasan
                        </h4>
                    </div>
                </div>
                <div class="card-body">
                    <div class="d-flex mb-2">
                        <p class="label">NOP</p>
                        <p class="value">@Model.FormattedNOP</p>
                    </div>
                    <div class="d-flex mb-2">
                        <p class="label">Nama Restoran</p>
                        <p class="value">@Model.Nama</p>
                    </div>
                    <div class="d-flex mb-2">
                        <p class="label">Alamat</p>
                        <p class="value">@Model.Alamat</p>
                    </div>
                    <div class="d-flex mb-2">
                        <p class="label">Rata-rata Transaksi</p>
                        <p class="value">Rp. @Model.RataRataBillPerOrang.ToString("N0") /Orang</p>
                    </div>
                </div>
            </div>

            @* <div class="card">
                <div class="card-header d-flex bg-red-bright">
                    <div class="flex-grow-1">
                        <h4 class="card-title fs-16 mb-0 text-dark">
                            Potensi Pajak
                        </h4>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-12 p-3">
                            <div class="card-red-bright">
                                <div class="card-body">
                                    <h4 class="card-title fs-14 mb-4 text-dark">
                                        Potensi Pajak per Bulan
                                    </h4>
                                    <h4 class="fw-bold fs-18 mb-0 text-dark">
                                        Rp. @Model.PotensiPajakPerBulanNonCatering.ToString("N0")
                                    </h4>
                                    <p class="fs-12 text-dark">10% dari omzet bulanan</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="card-red-bright">
                                <div class="card-body">
                                    <h4 class="card-title fs-14 mb-4 text-dark">
                                        Potensi Pajak per Tahun
                                    </h4>
                                    <h4 class="fw-bold fs-18 mb-0 text-dark">
                                        Rp. @Model.PotensiPajakPerTahunNonCatering.ToString("N0")
                                    </h4>
                                    <p class="fs-12 text-dark">Proyeksi untuk 12 bulan</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> *@

            <div class="card">
                <div class="card-header d-flex bg-red-bright">
                    <div class="flex-grow-1">
                        <h4 class="card-title fs-16 mb-0 text-dark">
                            Parameter Perhitungan
                        </h4>
                    </div>
                </div>
                <div class="card-body">
                    <div class="info-row">
                        <p class="label">Rata-rata Transaksi per Orang</p>
                        <p class="value">Rp. @Math.Ceiling(Model.RataRataBillPerOrang).ToString("N0")</p>
                    </div>
                    <div class="info-row">
                        <p class="label">Turnover Weekdays</p>
                        <p class="value">@Model.TurnoverWeekdaysNonCatering.ToString("N2") Kali</p>
                    </div>
                    <div class="info-row">
                        <p class="label">Turnover Weekend</p>
                        <p class="value">@Model.TurnoverWeekendNonCatering.ToString("N2") Kali</p>
                    </div>
                    <div class="info-row">
                        <p class="label">Rata-rata Pengunjung Weekdays</p>
                        <p class="value">@Math.Ceiling(Model.RataRataPengunjungWeekdaysNonCatering).ToString("N0") Orang</p>
                    </div>
                    <div class="info-row">
                        <p class="label">Rata-rata Pengunjung Weekend</p>
                        <p class="value">@Math.Ceiling(Model.RataRataPengunjungWeekendNonCatering).ToString("N0") Orang</p>
                    </div>
                    <div class="info-row">
                        <p class="label">Weekdays per Bulan</p>
                        <p class="value">22 Hari</p>
                    </div>
                    <div class="info-row">
                        <p class="label">Weekend per Bulan</p>
                        <p class="value">8 Hari</p>
                    </div>
                    <div class="info-row">
                        <p class="label">Tarif Pajak</p>
                        <p class="value">@Model.TarifPajak.ToString("P0")</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-12">

            <div class="card">
                <div class="card-header d-flex bg-red-bright">
                    <div class="flex-grow-1">
                        <h4 class="card-title fs-16 mb-0 text-dark">
                            Detail Omzet Restoran
                        </h4>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        
                        <div class="col-lg-8">
                            <div class="card border-red">
                                <div class="card-body bg-light bg-opacity-25">
                                    <h4 class="fs-16 fw-semibold mb-2">
                                        Perhitungan Omzet Makan di Tempat :
                                    </h4>
                                    <p class="fs-14 text-muted font-monospace mb-1">
                                        (Rata-rata Transaksi x Rata-rata Pengunjung Weekdays x 22) + (Rata-rata Transaksi x Rata-rata Pengunjung Weekend x 8)
                                    </p>
                                    @{
                                        decimal billPerOrang = Model.RataRataBillPerOrang;
                                        decimal pengunjungWeekdays = Model.RataRataPengunjungWeekdaysNonCatering;
                                        decimal pengunjungWeekend = Model.RataRataPengunjungWeekendNonCatering;

                                        decimal total = (billPerOrang * pengunjungWeekdays * 22) +
                                        (billPerOrang * pengunjungWeekend * 8);
                                    }
                                    <p class="fs-14 fw-semibold mb-2 text-dark">
                                        ( Rp. @Math.Ceiling(Model.RataRataBillPerOrang).ToString("N0") x @Math.Ceiling(Model.RataRataPengunjungWeekdaysNonCatering).ToString("N0") x 22) + (Rp. @Math.Ceiling(Model.RataRataBillPerOrang).ToString("N0") x @Math.Ceiling(Model.RataRataPengunjungWeekendNonCatering).ToString("N0") x 8) = Rp. @Math.Ceiling(total).ToString("N0")
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4">
                            <div class="card-red-bright">
                                <div class="card-body ">
                                    <div class="p-1">
                                        <h4 class="fs-16 fw-semibold mb-3 text-dark">
                                            Omzet Makan di Tempat
                                        </h4>
                                        <h4 class="fs-16 fw-semibold mb-1 text-dark">
                                            Rp. @Model.OmzetPerBulanNonCatering.ToString("N0")
                                        </h4>
                                        <p class="fs-14 text-dark">Total Omzet Bulanan</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header d-flex bg-red-bright">
                    <div class="flex-grow-1">
                        <h4 class="card-title fs-16 mb-0 text-dark">
                            Perhitungan Potensi Pajak
                        </h4>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card border-red">
                                <div class="card-body">
                                    <h4 class="fs-16 fw-semibold mb-2">
                                        Rumus Perhitungan Potensi Pajak Per Bulan :
                                    </h4>
                                    <p class="fs-14 text-muted font-monospace mb-1">
                                        Omzet Bulanan x 10%
                                    </p>
                                    <p class="fs-14 fw-semibold mb-2 text-dark">
                                        Rp. @Model.OmzetPerBulanNonCatering.ToString("N0") x 10% =
                                        @{
                                            decimal omzetBulan = (Model.OmzetPerBulanNonCatering * Model.TarifPajak);
                                        }
                                        Rp. @omzetBulan.ToString("N0")
                                    </p>
                                    <h4 class="fs-16 fw-semibold mb-2">
                                        Rumus Perhitungan Potensi Pajak Per Tahun :
                                    </h4>
                                    <p class="fs-14 text-muted font-monospace mb-1">
                                        Potensi Pajak Per Bulan x 12
                                    </p>
                                    <p class="fs-14 fw-semibold mb-2 text-dark">
                                        Rp. @omzetBulan.ToString("N0") x 12 =
                                        @{
                                            decimal potensiTahun = (omzetBulan * 12);
                                        }
                                        Rp. @potensiTahun.ToString("N0")
                                    </p>
                                    <h4 class="fs-16 fw-semibold mb-2 text-dark">
                                        Total Potensi Pajak Per Tahun : Rp. @potensiTahun.ToString("N0")
                                    </h4>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header d-flex bg-red-bright">
                    <div class="flex-grow-1">
                        <h4 class="card-title fs-16 mb-0 text-dark">
                            Rumus Lengkap Perhitungan Potensi Pajak (Non-Catering)
                        </h4>
                    </div>
                </div>

                <div class="card-body">

                    <h4 class="fs-16 fw-semibold text-dark mb-3">Perhitungan Omzet Tenant/Non-Catering</h4>

                    <p class="fs-14 text-muted font-monospace mb-1">
                        Rata-Rata Pengunjung (Weekdays) = Jumlah Kursi x Turnover Weekdays
                    </p>
                    <p class="fs-14 text-dark mb-2 fw-bold">
                        = @Model.JumlahKursi.ToString("N0") x @Model.TurnoverWeekdaysNonCatering.ToString("N1") = @Model.RataRataPengunjungWeekdaysNonCatering.ToString("N0") orang
                    </p>

                    <p class="fs-14 text-muted font-monospace mb-1">
                        Rata-Rata Pengunjung (Weekend) = Jumlah Kursi x Turnover Weekend
                    </p>
                    <p class="fs-14 text-dark mb-2 fw-bold">
                        = @Model.JumlahKursi.ToString("N0") x @Model.TurnoverWeekendNonCatering.ToString("N1") = @Model.RataRataPengunjungWeekendNonCatering.ToString("N0") orang
                    </p>

                    <p class="fs-14 text-muted font-monospace mb-1">
                        Omzet/Bulan = (Rata-Rata Bill/Orang x Pengunjung Weekdays x 22) + (Rata-Rata Bill/Orang x Pengunjung Weekend x 8)
                    </p>
                    <p class="fs-14 text-dark mb-3 fw-bold">
                        = (Rp. @Model.RataRataBillPerOrang.ToString("N0") x @Model.RataRataPengunjungWeekdaysNonCatering.ToString("N0") x 22) +
                        (Rp. @Model.RataRataBillPerOrang.ToString("N0") x @Model.RataRataPengunjungWeekendNonCatering.ToString("N0") x 8) =
                        Rp. @Model.OmzetPerBulanNonCatering.ToString("N0")
                    </p>

                    <hr>

                    <h4 class="fs-16 fw-bold text-dark mb-3">Perhitungan Potensi Pajak</h4>

                    <p class="fs-14 text-muted font-monospace mb-1">
                        Potensi Pajak/Bulan = Omzet/Bulan x Tarif Pajak
                    </p>
                    <p class="fs-14  mb-2 fw-bold text-dark">
                        = Rp. @Model.OmzetPerBulanNonCatering.ToString("N0") x @Model.TarifPajak.ToString("P0") = Rp. @Model.PotensiPajakPerBulanNonCatering.ToString("N0")
                    </p>

                    <p class="fs-14 text-muted font-monospace mb-1">
                        Potensi Pajak/Tahun = Potensi Pajak/Bulan x @Model.BulanSisa
                    </p>
                    <p class="fs-14 fw-bold text-dark">
                        = Rp. @Model.PotensiPajakPerBulanNonCatering.ToString("N0") x 12 = Rp. @Model.PotensiPajakPerTahunNonCatering.ToString("N0")
                    </p>

                </div>

            </div>
        </div>

</div>

}else
{
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-md-6 col-12">
                <div class="card text-center shadow-sm border-0">
                    <div class="card-body">
                        <img src="~/images/coming-soon-img.png" alt="Tidak Ada Data" class="img-fluid mb-4" style="max-width: 180px;" />
                        <h5 class="card-title text-danger">Data Tidak Ditemukan</h5>
                        <p class="card-text text-muted">
                            Maaf, data yang Anda cari belum tersedia atau tidak ditemukan.
                            @* Coba ubah filter atau periksa kembali input Anda. *@
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
