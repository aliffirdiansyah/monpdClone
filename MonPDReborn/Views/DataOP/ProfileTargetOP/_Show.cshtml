@model MonPDReborn.Models.DataOP.ProfileTargetOPVM.Show

<div class="table-responsive">
    @(
        Html.DevExtreme().DataGrid<MonPDReborn.Models.DataOP.ProfileTargetOPVM.TargetSeluruh>()
                .ID("targetSeluruhGrid")
                .DataSource(Model.DataTargetSeluruhList)
                .KeyExpr("JenisPajak")
                .ShowBorders(true)
                .ShowColumnLines(true)
                .ShowColumnHeaders(true)
                .AllowColumnResizing(true)
                .ShowRowLines(true)
                .ColumnAutoWidth(true)
                .SearchPanel(s => s.Visible(true).HighlightCaseSensitive(false))
                .FilterRow(f => f.Visible(true))
                .HeaderFilter(h => h.Visible(true))
                .Sorting(s => s.Mode(GridSortingMode.Multiple))
                .Paging(p => p.PageSize(10))
                .Pager(pager =>
                {
                    pager.ShowPageSizeSelector(true);
                    pager.AllowedPageSizes(new[] { 10, 20, 50 });
                    pager.ShowInfo(true);
                })
                .Columns(columns => {
                    columns.AddFor(m => m.Tanggal).Caption("Tanggal").Format("dd MMM yyyy");
                    columns.AddFor(m => m.JenisPajak).Caption("Jenis Pajak");
                    columns.AddFor(m => m.Wilayah).Caption("Wilayah");
                    columns.AddFor(m => m.Target).Caption("Target").Format(f => f.Type(Format.Currency).Precision(0).Currency("IDR"));
                    columns.AddFor(m => m.Keterangan).Caption("Keterangan");

                })
                .Summary(summary =>
                {
                    summary.TotalItems(items =>
                    {
                        items.AddFor(m => m.Wilayah)
                             .SummaryType(SummaryType.Sum)
                             .DisplayFormat("Total");

                        items.AddFor(m => m.Target)
                            .SummaryType(SummaryType.Sum)
                            .CustomizeText(@<text>
                            function(data) {
                                const formatted = new Intl.NumberFormat('id-ID', {
                                    style: 'currency',
                                    currency: 'IDR',
                                    minimumFractionDigits: 0
                                }).format(data.value);
                                return formatted;
                                    }
                                    </text>
                                            );
                    });
                })
            )
</div>

