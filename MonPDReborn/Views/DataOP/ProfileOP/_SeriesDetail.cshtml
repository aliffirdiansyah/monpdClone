@(Html.DevExtreme().DataGrid<MonPDReborn.Models.DataOP.ProfileOPVM.SeriesDetail>()
    .DataSource(m => m.Mvc()
        .LoadAction("GetSeriesDetailData")
        .Key("Kategori")
        .LoadParams(new
        {
            JenisPajak = ViewData["JenisPajak"],
        })
    )
    .ShowColumnLines(true)
    .ShowRowLines(true)
    .ShowBorders(true)
    .ShowColumnHeaders(true)
    .RowAlternationEnabled(true)
    .ColumnAutoWidth(true)
    .Paging(p => p.PageSize(10))
    .Pager(p => p
        .ShowPageSizeSelector(true)
        .AllowedPageSizes(new[] { 5, 10, 20 })
        .ShowInfo(true)
    )
    .Columns(columns =>
    {
        columns.AddFor(m => m.Kategori)
            .Caption("Kategori")
            .CssClass("fw-bold").CssClass("fw-bold");

        columns.Add()
            .DataField("Tahun2021")
            .Caption("2021")
            .CellTemplate(@<text>
                               <div style="display: flex; align-items: center; justify-content: space-between;">
                                   <button class="btn btn-sm btn-outline-primary me-2"
                                           onclick="onSeriesClick('<%- data.EnumPajak %>','<%- data.Kategori %>', 'Tahun2021')"
                                           title="Lihat Detail">
                                       <i class="ri-search-line"></i>
                                   </button>
                                   <span><%- value %></span>
                               </div>
                           </text>)
            .CalculateCellValue("data => data.Tahun2021");

        columns.Add()
            .DataField("Tahun2022")
            .Caption("2022")
            .CellTemplate(@<text>
                               <div style="display: flex; align-items: center; justify-content: space-between;">
                                   <button class="btn btn-sm btn-outline-primary me-2"
                                           onclick="onSeriesClick('<%- data.EnumPajak %>','<%- data.Kategori %>', 'Tahun2022')"
                                           title="Lihat Detail">
                                       <i class="ri-search-line"></i>
                                   </button>
                                   <span><%- value %></span>
                               </div>
                           </text>)
            .CalculateCellValue("data => data.Tahun2022");

        columns.Add()
            .DataField("Tahun2023")
            .Caption("2023")
            .CellTemplate(@<text>
                               <div style="display: flex; align-items: center; justify-content: space-between;">
                                   <button class="btn btn-sm btn-outline-danger me-2"
                                           onclick="onSeriesClick('<%- data.EnumPajak %>','<%- data.Kategori %>', 'Tahun2023')"
                                           title="Lihat Detail">
                                       <i class="ri-search-line"></i>
                                   </button>
                                   <span><%- value %></span>
                               </div>
                           </text>)
            .CalculateCellValue("data => data.Tahun2023");

        columns.Add()
            .DataField("Tahun2024")
            .Caption("2024")
            .CellTemplate(@<text>
                               <div style="display: flex; align-items: center; justify-content: space-between;">
                                   <button class="btn btn-sm btn-outline-success me-2"
                                           onclick="onSeriesClick('<%- data.EnumPajak %>','<%- data.Kategori %>', 'Tahun2024')"
                                           title="Lihat Detail">
                                       <i class="ri-search-line"></i>
                                   </button>
                                   <span><%- value %></span>
                               </div>
                           </text>)
            .CalculateCellValue("data => data.Tahun2024");

        columns.Add()
            .DataField("Tahun2025")
            .Caption("2025")
            .CellTemplate(@<text>
                               <div style="display: flex; align-items: center; justify-content: space-between;">
                                   <button class="btn btn-sm btn-outline-info me-2"
                                           onclick="onSeriesClick('<%- data.EnumPajak %>','<%- data.Kategori %>', 'Tahun2025')"
                                           title="Lihat Detail">
                                       <i class="ri-search-line"></i>
                                   </button>
                                   <span><%- value %></span>
                               </div>
                           </text>)
            .CalculateCellValue("data => data.Tahun2025");
    })
    .Summary(s =>
    {
        s.TotalItems(items =>
        {
            items.Add()
                .Column("Kategori")
                .SummaryType(SummaryType.Custom)
                .DisplayFormat("Total")
                .Alignment(HorizontalAlignment.Center);

            items.Add()
                .Column("Tahun2021")
                .SummaryType(SummaryType.Sum)
                .DisplayFormat("{0}")
                .Alignment(HorizontalAlignment.Right);

            items.Add()
                .Column("Tahun2022")
                .SummaryType(SummaryType.Sum)
                .DisplayFormat("{0}")
                .Alignment(HorizontalAlignment.Right);

            items.Add()
                .Column("Tahun2023")
                .SummaryType(SummaryType.Sum)
                .DisplayFormat("{0}")
                .Alignment(HorizontalAlignment.Right);

            items.Add()
                .Column("Tahun2024")
                .SummaryType(SummaryType.Sum)
                .DisplayFormat("{0}")
                .Alignment(HorizontalAlignment.Right);

            items.Add()
                .Column("Tahun2025")
                .SummaryType(SummaryType.Sum)
                .DisplayFormat("{0}")
                .Alignment(HorizontalAlignment.Right);
        });
    })
)
