@model MonPDReborn.Models.Reklame.KalkulatorReklameVM.Index

@{
    ViewData["Title"] = "Kakulator Reklame";
    Layout = "~/Views/Shared/_LayoutReklame.cshtml";
}

<style>
    .devextreme-helper {
        font-size: 0.8rem;
    }
</style>

<div class="row">

    <div class="col-lg-12">
        <div class="card">
            <div class="card-header d-flex bg-header-color align-items-center">
                <div class="flex-grow-1">
                    <h4 class="card-title text-dark fs-16 mb-1">
                        Kalkulator Reklame
                    </h4>
                </div>
            </div>
            <div class="card shadow-sm">
                <div class="card-body">

                    <!-- 🧭 Tab Navigation -->
                    <ul class="nav nav-pills arrow-navtabs nav-success bg-light mb-3" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#tab-nsr" role="tab">
                                <span class="d-block d-sm-none"><i class="bx bx-analyse"></i></span>
                                <span class="d-none d-sm-block fw-semibold">NSR PERMANEN</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#tab-kontrak" role="tab">
                                <span class="d-block d-sm-none"><i class="bx bx-calculator"></i></span>
                                <span class="d-none d-sm-block fw-semibold">Nilai Kontrak</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#tab-insidentil" role="tab">
                                <span class="d-block d-sm-none"><i class="bx bx-calculator"></i></span>
                                <span class="d-none d-sm-block fw-semibold">NSR INSIDENTIL</span>
                            </a>
                        </li>
                    </ul>

                    <!-- 🧩 Tab Content -->
                    <div class="tab-content text-muted">

                        <!-- ✅ TAB 1: NSR -->
                        <div class="tab-pane active" id="tab-nsr" role="tabpanel">
                            <div class="row g-3">

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="Panjang" class="form-label fw-semibold">Panjang (m)</label>
                                    @(Html.DevExtreme().NumberBox()
                                                                        .ID("Panjang")
                                                                        .ShowClearButton(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45)
                                                                        .Max(999)
                                                                        .Min(1))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Panjang bidang reklame dalam meter, diukur dari sisi kiri ke kanan papan reklame.
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="Lebar" class="form-label fw-semibold">Lebar (m)</label>
                                    @(Html.DevExtreme().NumberBox()
                                                                        .ID("Lebar")
                                                                        .ShowClearButton(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45)
                                                                        .Max(999)
                                                                        .Min(1))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Lebar bidang reklame dalam meter, diukur dari sisi bawah ke atas papan reklame.
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="Tinggi" class="form-label fw-semibold">Tinggi (m)</label>
                                    @(Html.DevExtreme().NumberBox()
                                                                        .ID("Tinggi")
                                                                        .ShowClearButton(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45)
                                                                        .Max(999)
                                                                        .Min(1))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Ketinggian reklame dihitung dari bagian paling atas reklame hingga ke permukaan tanah.
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="SudutPandang" class="form-label fw-semibold">Sudut Pandang (°)</label>
                                    @(Html.DevExtreme().NumberBox()
                                                                        .ID("SudutPandang")
                                                                        .ShowClearButton(true)
                                                                        .Placeholder("Jumlah arah pandang reklame dapat dilihat")
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45)
                                                                        .Max(999)
                                                                        .Min(1))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Besaran sudut kemiringan papan reklame terhadap arah pandang pengguna jalan.
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="Sisi" class="form-label fw-semibold">Jumlah Sisi</label>
                                    @(Html.DevExtreme().SelectBox()
                                                                        .ID("Sisi")
                                                                        .DataSource(new[] {
                                                                        new { Id = 1, Text = "1 Sisi" },
                                                                        new { Id = 2, Text = "2 Sisi" },
                                                                        new { Id = 3, Text = "3 Sisi" },
                                                                        new { Id = 4, Text = "4 Sisi" }
                                                                        })
                                                                        .ValueExpr("Id")
                                                                        .DisplayExpr("Text")
                                                                        .Placeholder("Pilih Jumlah Sisi")
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .ShowClearButton(true)
                                                                        .Height(45)
                                                                        )
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Jumlah sisi reklame yang menampilkan iklan (misal: 1 sisi tunggal, 2 sisi bolak-balik).
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="IdJalan" class="form-label fw-semibold">Nama Jalan</label>
                                    @(Html.DevExtreme().SelectBox()
                                                                        .ID("IdJalan")
                                                                        .DataSource(Model.JalanList)
                                                                        .DisplayExpr("Text")
                                                                        .ValueExpr("Value")
                                                                        .Placeholder("Pilih Nama Jalan")
                                                                        .SearchEnabled(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Lokasi jalan tempat reklame dipasang, berpengaruh pada nilai strategis (NSR).
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="JenisReklame" class="form-label fw-semibold">Jenis Reklame</label>
                                    @(Html.DevExtreme().SelectBox()
                                                                        .ID("JenisReklame")
                                                                        .DataSource(Model.JenisReklameList)
                                                                        .DisplayExpr("Text")
                                                                        .ValueExpr("Value")
                                                                        .Placeholder("Pilih Jenis Reklame")
                                                                        .SearchEnabled(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Jenis media reklame, misalnya papan/baliho, videotron, spanduk, atau neon box.
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="LetakReklame" class="form-label fw-semibold">Letak Reklame</label>
                                    @(Html.DevExtreme().SelectBox()
                                                                        .ID("LetakReklame")
                                                                        .DataSource(Model.LetakReklameList)
                                                                        .DisplayExpr("Text")
                                                                        .ValueExpr("Value")
                                                                        .Placeholder("Pilih Letak Reklame")
                                                                        .SearchEnabled(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Posisi reklame dipasang di luar ruangan (outdoor) atau dalam ruangan (indoor).
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="produkList" class="form-label fw-semibold">Jenis Produk</label>
                                    @(Html.DevExtreme().SelectBox()
                                                                        .ID("produkList")
                                                                        .DataSource(Model.ProdukList)
                                                                        .DisplayExpr("Text")
                                                                        .ValueExpr("Value")
                                                                        .Placeholder("Pilih Produk")
                                                                        .SearchEnabled(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Kategori produk atau layanan yang diiklankan pada media reklame.
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label class="form-label fw-semibold">&nbsp;</label>
                                    <button type="button" class="btn btn-success w-100" onclick="loadShowData()">
                                        <i class="bi bi-funnel-fill me-1"></i> Hitung NSR
                                    </button>
                                </div>

                            </div>
                        </div>

                        <!-- 📊 TAB 2: Nilai Kontrak -->
                        <div class="tab-pane" id="tab-kontrak" role="tabpanel">
                            <div class="p-3 border rounded bg-light-subtle">
                                <p class="mb-0 text-muted">
                                    <i class='bx bx-info-circle me-1'></i>
                                    Hitung pajak berdasarkan nilai kontrak.
                                </p>
                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="nilaiKontrak" class="form-label fw-semibold">Nilai Kontrak</label>
                                    @(Html.DevExtreme().NumberBox()
                                                                        .ID("nilaiKontrak")
                                                                        .ShowClearButton(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Format("#,##0")
                                                                        .Height(45)
                                                                        )
                                    @* <small class="form-text text-danger devextreme-helper helper-text mt-auto">
                                <i class='bx bx-info-circle text- me-1 '></i>
                                Panjang bidang reklame dalam meter, diukur dari sisi kiri ke kanan papan reklame.
                            </small> *@
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label class="form-label fw-semibold">&nbsp;</label>
                                    <button type="button" class="btn btn-info w-100" onclick="loadShowKontrak()">
                                        <i class="bi bi-funnel-fill me-1"></i> Hitung Nilai Kontrak
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- ✅ TAB 3: NSR INSIDENTIL -->
                        <div class="tab-pane" id="tab-insidentil" role="tabpanel">
                            <div class="row g-3">
                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="NamaJalan" class="form-label fw-semibold">Nama Jalan</label>
                                    @(Html.DevExtreme().SelectBox()
                                                                        .ID("NamaJalanIns")
                                                                        .DataSource(Model.JalanList)
                                                                        .DisplayExpr("Text")
                                                                        .ValueExpr("Value")
                                                                        .Placeholder("Pilih Nama Jalan")
                                                                        .SearchEnabled(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Lokasi jalan tempat reklame dipasang, berpengaruh pada nilai strategis (NSR).
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="JenisReklame" class="form-label fw-semibold">Jenis Reklame</label>
                                    @(Html.DevExtreme().SelectBox()
                                                                        .ID("JenisReklameIns")
                                                                        .DataSource(Model.JenisReklameInsList)
                                                                        .DisplayExpr("Text")
                                                                        .ValueExpr("Value")
                                                                        .Placeholder("Pilih Jenis Reklame")
                                                                        .SearchEnabled(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45)
                                                                        .OnValueChanged("onJenisReklameInsChanged")
                                                                        )
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Jenis media reklame, misalnya papan/baliho, videotron, spanduk, atau neon box.
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="LetakReklame" class="form-label fw-semibold">Letak Reklame</label>
                                    @(Html.DevExtreme().SelectBox()
                                                                        .ID("LetakReklameIns")
                                                                        .DataSource(Model.LetakReklameList)
                                                                        .DisplayExpr("Text")
                                                                        .ValueExpr("Value")
                                                                        .Placeholder("Pilih Letak Reklame")
                                                                        .SearchEnabled(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Posisi reklame dipasang di luar ruangan (outdoor) atau dalam ruangan (indoor).
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="produkList" class="form-label fw-semibold">Jenis Produk</label>
                                    @(Html.DevExtreme().SelectBox()
                                                                        .ID("produkListIns")
                                                                        .DataSource(Model.ProdukList)
                                                                        .DisplayExpr("Text")
                                                                        .ValueExpr("Value")
                                                                        .Placeholder("Pilih Produk")
                                                                        .SearchEnabled(true)
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45))
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Kategori produk atau layanan yang diiklankan pada media reklame.
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="TglMulaiBerlaku" class="form-label fw-semibold">Tanggal Mulai Berlaku</label>
                                    @(Html.DevExtreme().DateBox()
                                                                        .ID("TglMulaiBerlakuIns")
                                                                        .Placeholder("Pilih tanggal mulai")
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45)
                                                                        )
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Tanggal awal masa berlaku penyelenggaraan reklame.
                                    </small>
                                </div>

                                <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                    <label for="TglSelesaiBerlaku" class="form-label fw-semibold">Tanggal Selesai Berlaku</label>
                                    @(Html.DevExtreme().DateBox()
                                                                        .ID("TglSelesaiBerlakuIns")
                                                                        .Placeholder("Pilih tanggal selesai")
                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                        .Height(45)
                                                                        )
                                    <small class="form-text text-danger mt-auto">
                                        <i class='bx bx-info-circle me-1'></i>
                                        Tanggal akhir masa berlaku reklame.
                                    </small>
                                </div>

                                <!-- Bagian Ukuran (Mode Satuan) -->
                                <div class="row g-3 mt-2">
                                    <!-- Jumlah Satuan -->
                                    <div id="frm-jumlahsatuan" style="display:none">
                                        <div class="col-12 col-md-4 col-lg-3 d-flex flex-column">
                                            <label for="JumlahSatuan" class="form-label fw-semibold">Jumlah Satuan</label>
                                            @(Html.DevExtreme().NumberBox()
                                                                                        .ID("JumlahSatuanIns")
                                                                                        .Placeholder("Isi jumlah satuan reklame")
                                                                                        .Min(1)
                                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                                        .Height(45)
                                                                                        )
                                            <small class="form-text text-danger mt-auto">
                                                <i class='bx bx-info-circle me-1'></i>
                                                Jumlah unit atau bidang reklame yang dipasang.
                                            </small>
                                        </div>
                                    </div>


                                    <!-- Panjang -->
                                    <div id="frm-panjang" style="display:none">
                                        <div class="col-12 col-md-4 col-lg-3 d-flex flex-column">
                                            <label for="Panjang" class="form-label fw-semibold">Panjang (meter)</label>
                                            @(Html.DevExtreme().NumberBox()
                                                                                        .ID("PanjangIns")
                                                                                        .Placeholder("Panjang media reklame")
                                                                                        .Min(0)
                                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                                        .Height(45)
                                                                                        )
                                            <small class="form-text text-danger mt-auto">
                                                <i class='bx bx-info-circle me-1'></i>
                                                Panjang media reklame dalam meter.
                                            </small>
                                        </div>
                                    </div>

                                    <!-- Lebar -->
                                    <div id="frm-lebar" style="display:none">
                                        <div class="col-12 col-md-4 col-lg-3 d-flex flex-column">
                                            <label for="Lebar" class="form-label fw-semibold">Lebar (meter)</label>
                                            @(Html.DevExtreme().NumberBox()
                                                                                        .ID("LebarIns")
                                                                                        .Placeholder("Lebar media reklame")
                                                                                        .Min(0)
                                                                                        .StylingMode(EditorStylingMode.Outlined)
                                                                                        .Height(45)
                                                                                        )
                                            <small class="form-text text-danger mt-auto">
                                                <i class='bx bx-info-circle me-1'></i>
                                                Lebar media reklame dalam meter.
                                            </small>
                                        </div>
                                    </div>
                                </div>

                                <!-- Bagian Mode Perulangan -->
                                <div id="div-mode-perulangan" class="row g-3 mt-2" style="display:none">
                                    <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                        <label for="JumlahPerulangan" class="form-label fw-semibold">Jumlah Perulangan</label>
                                        @(Html.DevExtreme().NumberBox()
                                                                                .ID("JumlahPerulanganIns")
                                                                                .Placeholder("Isi jumlah perulangan iklan")
                                                                                .Min(1)
                                                                                .StylingMode(EditorStylingMode.Outlined)
                                                                                .Height(45)
                                                                                )
                                        <small class="form-text text-danger mt-auto">
                                            <i class='bx bx-info-circle me-1'></i>
                                            Untuk reklame berjalan atau berganti tayang (misal videotron).
                                        </small>
                                    </div>

                                    <div class="col-12 col-md-6 col-lg-3 d-flex flex-column">
                                        <label for="JumlahLayar" class="form-label fw-semibold">Jumlah Layar</label>
                                        @(Html.DevExtreme().NumberBox()
                                                                                .ID("JumlahLayarIns")
                                                                                .Placeholder("Isi jumlah layar tampilan")
                                                                                .Min(1)
                                                                                .StylingMode(EditorStylingMode.Outlined)
                                                                                .Height(45)
                                                                                )
                                        <small class="form-text text-danger mt-auto">
                                            <i class='bx bx-info-circle me-1'></i>
                                            Digunakan untuk reklame elektronik dengan beberapa sisi tampilan.
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="col-lg-12">
    <div id="loading2-Show" style="display:none;">
        <div class="text-center">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
    <div class="card" id="card-show" style="display:none;">
        <div class="card-header d-flex bg-header-color align-items-center">
            <div class="flex-grow-1">
                <h4 class="card-title text-dark fs-16 mb-1">
                    Hasil Perhitungan
                </h4>
            </div>
        </div>
        <div class="card-body">
            <div id="Show">
            </div>
            <div id="ShowKontrak">
            </div>
        </div>
    </div>
</div>

</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function loadShowData() {
            let jenisReklame = $("#JenisReklame").dxSelectBox("instance").option("value");
            let letakReklame = $("#LetakReklame").dxSelectBox("instance").option("value");
            let produk = $("#produkList").dxSelectBox("instance").option("value");
            let IdJalan = $("#IdJalan").dxSelectBox("instance")?.option("value");
            let panjang = $("#Panjang").dxNumberBox("instance")?.option("value");
            let lebar = $("#Lebar").dxNumberBox("instance")?.option("value");
            let sisi = $("#Sisi").dxSelectBox("instance")?.option("value");
            let tinggi = $("#Tinggi").dxNumberBox("instance")?.option("value");
            let sudutPandang = $("#SudutPandang").dxNumberBox("instance")?.option("value");

            if (!jenisReklame || !letakReklame || !produk || !IdJalan || !panjang || !lebar || !tinggi ||!sudutPandang) {
                Swal.fire({
                    icon: 'warning',
                    title: 'Verifikasi Data',
                    text: '⚠ Harap pilih semua filter utama sebelum menerapkan.',
                    confirmButtonText: 'OK'
                });
                return;
            }
            $.ajax({
                url: '@Url.Action("Show", "KalkulatorReklame")',
                type: "GET",
                data: {
                    IdJenisReklame: jenisReklame,
                    IdLetakReklame: letakReklame,
                    IdJenisProduk: produk,
                    IdJalan: IdJalan,
                    Sisi: sisi,
                    panjang: panjang,
                    lebar: lebar,
                    tinggi: tinggi,
                    sudutPandang: sudutPandang
                },
                beforeSend: function () {
                    $("#Show").html('');
                    $("#ShowKontrak").html('');
                    $("#card-show").hide();
                    $("#Show").hide();
                    $("#loading2-Show").show();
                },
                success: function (response) {
                    if (response.Status === undefined) {
                        $("#card-show").show();
                        $("#Show").html(response);
                    }
                    else {
                        Swal.fire({
                            icon: 'warning',
                            title: '<b style="color:orange">Peringatan</b>',
                            text: response.Message,
                        })
                    }
                },
                error: function (xhr, status, error) {
                    console.error("Error:", error);
                    Swal.fire({
                        icon: 'error',
                        title: 'Terjadi Kesalahan',
                        text: 'Gagal memuat data show.'
                    });
                },
                complete: function () {
                    $("#loading2-Show").hide();
                    $("#Show").show();
                }
            });
        }

       
    </script>
    <script>
        function loadShowKontrak() {
            let nilaiKontrak = $("#nilaiKontrak").dxNumberBox("instance")?.option("value");

            if (!nilaiKontrak) {
                Swal.fire({
                    icon: 'warning',
                    title: 'Verifikasi Data',
                    text: '⚠ Harap pilih semua filter utama sebelum menerapkan.',
                    confirmButtonText: 'OK'
                });
                return;
            }
            $.ajax({
                url: '@Url.Action("ShowKontrak", "KalkulatorReklame")',
                type: "GET",
                data: {
                    NilaiKontrak: nilaiKontrak,
                },
                beforeSend: function () {
                    $("#Show").html('');
                    $("#ShowKontrak").html('');
                    $("#card-show").hide();
                    $("#ShowKontrak").hide();
                    $("#loading2-Show").show();
                },
                success: function (response) {
                    if (response.Status === undefined) {
                        $("#card-show").show();
                        $("#ShowKontrak").html(response);
                    }
                    else {
                        Swal.fire({
                            icon: 'warning',
                            title: '<b style="color:orange">Peringatan</b>',
                            text: response.Message,
                        })
                    }
                },
                error: function (xhr, status, error) {
                    console.error("Error:", error);
                    Swal.fire({
                        icon: 'error',
                        title: 'Terjadi Kesalahan',
                        text: 'Gagal memuat data show.'
                    });
                },
                complete: function () {
                    $("#loading2-Show").hide();
                    $("#ShowKontrak").show();
                }
            });
        }

    </script>
    <script>
        function onJenisReklameInsChanged(e) {
            const item = e.component.getDataSource().items().find(x => x.Value === e.value);
            $("#frm-jumlahsatuan, #frm-panjang, #frm-lebar, #div-mode-perulangan").hide();
            if (!item) return;

            switch (item.ModeUkur) {
                case 1:
                    $("#frm-jumlahsatuan").show();
                    break;
                case 2:
                    $("#frm-jumlahsatuan, #frm-panjang, #frm-lebar").show();
                    break;
                case 3:
                    $("#div-mode-perulangan").show();
                    break;
            }
        }
    </script>

}