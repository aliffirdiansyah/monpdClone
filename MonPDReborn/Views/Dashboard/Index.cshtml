@using MonPDLib.General
@model MonPDReborn.Models.DashboardVM.Index

@{
    ViewData["Title"] = "Dashboard";
}

<div class="card border shadow-sm mb-4">
    <div class="card-header d-flex align-items-center" style="background-color: #d35400;">
        <div class="flex-grow-1">
            <h5 class="card-title fs-16 text-white mb-0">
                <h5 class="card-title fs-16 text-white mb-0">
                    <i class="mdi mdi-database align-middle me-1"></i> REALISASI PAJAK DAERAH
                </h5>
            </h5>
        </div>
        <div class="flex-shrink-0 text-end">
            <button class="btn btn-sm btn-outline-light" title="Segarkan data realisasi pajak" onclick="fnSeriesPajakDaerah()">
                <i class="mdi mdi-refresh align-middle"></i> Refresh
            </button>
        </div>
    </div>
    <div class="card-body">
        <div class="row g-1">
            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-primary border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">
                            <!-- Persen di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-primary text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseHotel %
                                </div>
                            </div>

                            <!-- Keterangan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.JasaPerhotelan.GetDescription())</span>
                                    <i class="bx bx-building fs-20"></i>
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiHotel.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetHotel.ToString("n0")</strong>
                                    </span>
                                </p>

                            </div>
                        </div>
                    </div>
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpHotel.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-info border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-info text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseMamin %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.MakananMinuman.GetDescription())</span>
                                    <i class="bx bx-restaurant fs-20"></i>
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiMamin.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetMamin.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpMamin.ToString("n0") OP</span>
                    </div>
                </div>
            </div>


            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-danger border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-danger text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseHiburan %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.JasaKesenianHiburan.GetDescription())</span>
                                    <i class="bx bx-camera-movie fs-20"></i>
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiHiburan.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetHiburan.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpHiburan.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-success border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-success text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseListrik %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.TenagaListrik.GetDescription())</span>
                                    <i class="bx bx-bulb fs-20"></i>
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiListrik.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetListrik.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpListrik.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-primary border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-primary text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseParkir %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.JasaParkir.GetDescription())</span>
                                    <i class="bx bx-stop-circle fs-20"></i> <!-- Ganti jika nanti bx-parking tersedia -->
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiParkir.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetParkir.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpParkir.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-info border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-info text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseReklame %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.Reklame.GetDescription())</span>
                                    <i class="bx bx-news fs-20"></i> <!-- Ikon cocok untuk reklame/banner/news -->
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiReklame.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetReklame.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpReklame.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-danger border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-danger text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseAbt %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.AirTanah.GetDescription())</span>
                                    <i class="bx bx-water fs-20"></i> <!-- Ikon cocok -->
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiAbt.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetAbt.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpAbt.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-success border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-success text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentasePbb %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.PBB.GetDescription())</span>
                                    <i class="bx bx-home fs-20"></i> <!-- Ikon rumah -->
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiPbb.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetPbb.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpPbb.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-primary border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-primary text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseBphtb %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.BPHTB.GetDescription())</span>
                                    <i class="bx bx-transfer-alt fs-20"></i> <!-- Ikon transfer hak -->
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiBphtb.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetBphtb.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpBphtb.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-info border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-info text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseOpsenPkb %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.OpsenPkb.GetDescription())</span>
                                    <i class="bx bx-car fs-20"></i> <!-- Ikon mobil -->
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiOpsenPkb.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetOpsenPkb.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpOpsenPkb.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-danger border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-danger text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.PersentaseOpsenBbnkb %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">@(EnumFactory.EPajak.OpsenBbnkb.GetDescription())</span>
                                    <i class="bx bx-transfer fs-20"></i> <!-- Ikon perpindahan kepemilikan kendaraan -->
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.RealisasiOpsenBbnkb.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TargetOpsenBbnkb.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span><i class="bx bx-file me-1"></i>@Model.Data.JumlahOpOpsenBbnkb.ToString("n0") OP</span>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-lg-3">
                <div class="card card-success bg-secondary border-0 shadow-sm text-white">
                    <div class="card-body py-2 px-3">
                        <div class="d-flex align-items-center">

                            <!-- Persentase di kiri -->
                            <div class="flex-shrink-0 me-3">
                                <div class="bg-secondary text-white border border-white fw-bold text-center px-3 py-3 rounded fs-16" style="min-width: 80px;">
                                    @Model.Data.TotalPersentase %
                                </div>
                            </div>

                            <!-- Keterangan di kanan -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="fw-semibold fs-15 text-white">Total Semua Pajak</span>
                                    <i class="bx bx-pie-chart-alt-2 fs-20"></i> <!-- Ikon total pie chart -->
                                </div>
                                <p class="card-text mb-1 fs-14 mt-1">
                                    <span class="fs-12 d-block">
                                        Real : <strong class="text-white">Rp @Model.Data.TotalRealisasi.ToString("n0")</strong>
                                    </span>
                                    <span class="fs-12 d-block">
                                        Trgt : <strong class="text-white">Rp @Model.Data.TotalTarget.ToString("n0")</strong>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="card-footer py-1 px-3 border-top border-white d-flex justify-content-between fs-11 text-dark bg-light">
                        <span>
                            <i class="bx bx-calendar-check me-1"></i>
                            @DateTime.Now.ToString("dd MMM yyyy", new System.Globalization.CultureInfo("id-ID"))
                        </span>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

@* <div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <h4 class="card-title fs-16 mb-0">
                    📊 STATISTIC
                </h4>

            </div><!-- end card header -->

            <div class="card-body">
                <div id="line_chart_datalabel" data-colors='["--vz-danger", "--vz-success"]' class="apex-charts" dir="ltr"></div>
            </div><!-- end card-body -->
        </div><!-- end card -->
    </div>
</div> *@

<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header d-flex align-items-center" style="background-color: #d35400;">
                <div class="flex-grow-1">
                    <h5 class="card-title text-white fs-16 mb-0">
                        <i class="mdi mdi-file-chart align-middle me-1"></i> SERIES PAJAK DAERAH
                    </h5>
                </div>
                <div class="flex-shrink-0">
                    <button class="btn btn-sm btn-outline-light" title="Segarkan data realisasi pajak" onclick="fnSeriesPajakDaerah()">
                        <i class="mdi mdi-refresh align-middle"></i> Refresh
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div class="text-center">
                    <div id="loading2-SeriesPajakDaerah" class="spinner-border text-primary" style="display: none">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
                <div id="SeriesPajakDaerah"></div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="card card-height-100">
            <div class="card-header d-flex align-items-center" style="background-color: #d35400;">
                <div class="flex-grow-1 mb-0">
                    <h5 class="card-title text-white">
                        <i class="mdi mdi-chart-bar align-middle me-1"></i>JUMLAH OBJEK PAJAK
                    </h5>
                </div>
                <div class="flex-shrink-0 mb-0">
                    <a href="@Url.Action("Index", "ProfileOP")" target="_blank" class="btn btn-sm btn-light">
                        <i class="ri-file-list-3-line align-middle"></i>
                        Detail
                    </a>
                    <button class="btn btn-sm btn-outline-light" onclick="fnJumlahObjekPajakTahunan()">
                        <i class="mdi mdi-refresh align-middle"></i>
                        Refresh
                    </button>
                </div>
            </div>
            <div class="card-body">
                <ul class="nav nav-tabs nav-border-top nav-border-top-primary mb-3" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#op-tahunan" role="tab" aria-selected="false">
                            JML OP TAHUNAN
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#op-series" role="tab" aria-selected="false" onclick="fnJumlahObjekPajakSeries()">
                            JML OP SERIES
                        </a>
                    </li>
                </ul>
                <div class="tab-content text-muted">
                    <div class="tab-pane active" id="op-tahunan" role="tabpanel">
                        <div class="text-center">
                            <div id="loading2-JumlahObjekPajakTahunan" class="spinner-border text-primary" style="display: none">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                        <div id="JumlahObjekPajakTahunan"></div>
                    </div>
                    <div class="tab-pane" id="op-series" role="tabpanel">
                        <div class="text-center">
                            <div id="loading2-JumlahObjekPajakSeries" class="spinner-border text-primary" style="display: none">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                        <div id="JumlahObjekPajakSeries"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @* <div class="row">
    <div class="col-lg-12">
        <div class="card card-height-100">
                <div class="card-header d-flex align-items-center" style="background-color: #d35400;">
                <div class="flex-grow-1">
                    <h5 class="card-title">
                        <h5 class="card-title fs-16 text-white mb-0">
                            <i class="mdi mdi-domain align-middle me-1"></i> DATA KONTROL (POTENSI OP)
                        </h5>
                    </h5>
                </div>
                <div class="flex-shrink-0">
                    <button class="btn btn-sm btn-light">
                        <i class="ri-file-list-3-line align-middle"></i>
                        Detail
                    </button>
                    <button class="btn btn-sm btn-outline-light" onclick="fnDataKontrolPotensiOp()">
                        <i class="mdi mdi-refresh align-middle"></i>
                        Refresh
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div class="text-center">
                    <div id="loading2-DataKontrolPotensiOp" class="spinner-border text-primary" style="display: none">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
                <div id="DataKontrolPotensiOp"></div>
            </div>
        </div>
    </div>
</div> *@

    <div class="row">
        <div class="col-lg-12">
            <div class="card card-height-100">
                <div class="card-header d-flex align-items-center" style="background-color: #d35400;">
                    <div class="flex-grow-1">
                        <h5 class="card-title fs-16 text-white mb-0">
                            <i class="mdi mdi-cash-multiple align-middle me-1"></i> PIUTANG
                        </h5>
                    </div>
                    <div class="flex-shrink-0">
                        <button class="btn btn-sm btn-outline-light" onclick="fnDataPiutang()">
                            <i class="mdi mdi-refresh align-middle"></i>
                            Refresh
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <h4 class="card-title fs-16 mb-3">
                        Data Piutang
                    </h4>

                    <div class="text-center mb-4">
                        <div class="text-center">
                            <div id="loading2-DataPiutang" class="spinner-border text-primary" style="display: none">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>

                    <div id="DataPiutang" class="mb-5"></div>
                    <div class="modal fade" id="detailModal" tabindex="-1" aria-hidden="true">
                        <div class="modal-dialog modal-xl modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Detail</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <!-- Isi modal akan diisi lewat JS -->
                                </div>
                            </div>
                        </div>
                    </div>


                </div>

            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="card card-height-100">
                <div class="card-header d-flex align-items-center" style="background-color: #d35400;">
                    <div class="flex-grow-1">
                        <h5 class="card-title fs-16 text-white mb-0">
                            <i class="mdi mdi-account-cash-outline align-middle me-1"></i> MUTASI
                        </h5>
                    </div>
                    <div class="flex-shrink-0">
                        <button class="btn btn-sm btn-outline-light" onclick="fnDataMutasi()">
                            <i class="mdi mdi-refresh align-middle"></i>
                            Refresh
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <h4 class="card-title fs-16 mb-3">
                        Data Mutasi
                    </h4>

                    <div class="text-center mb-4">
                        <<div class="text-center">
                            <div id="loading2-DataMutasi" class="spinner-border text-primary" style="display: none">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>

                    <div id="DataMutasi"></div>
                </div>

            </div>
        </div>
    </div>

    @section Scripts {
        <script>
            function getChartColorsArray(chartId) {
                if (document.getElementById(chartId) !== null) {
                    var colors = document.getElementById(chartId).getAttribute("data-colors");
                    colors = JSON.parse(colors);
                    return colors.map(function (value) {
                        var newValue = value.replace(" ", "");
                        if (newValue.indexOf(",") === -1) {
                            var color = getComputedStyle(document.documentElement).getPropertyValue(newValue);
                            if (color) return color;
                            else return newValue;;
                        } else {
                            var val = value.split(',');
                            if (val.length == 2) {
                                var rgbaColor = getComputedStyle(document.documentElement).getPropertyValue(val[0]);
                                rgbaColor = "rgba(" + rgbaColor + "," + val[1] + ")";
                                return rgbaColor;
                            } else {
                                return newValue;
                            }
                        }
                    });
                }
            }
            var swiper = new Swiper(".pajakSlider", {
                slidesPerView: 1,
                spaceBetween: 24,
                loop: true, // <--- ini penting
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                autoplay: {
                    delay: 3000,
                    disableOnInteraction: false,
                },
                breakpoints: {
                    640: {
                        slidesPerView: 2,
                    },
                    1024: {
                        slidesPerView: 3,
                    },
                    1600: {
                        slidesPerView: 4,
                    },
                },
            });
                    //  Line chart datalabel
            var linechartDatalabelColors = getChartColorsArray("line_chart_datalabel");
            var options = {
                chart: {
                    height: 500,
                    type: 'line',
                    zoom: {
                        enabled: false
                    },
                    toolbar: {
                        show: false
                    }
                },
                colors: linechartDatalabelColors,
                dataLabels: {
                    enabled: false,
                },
                stroke: {
                    width: [3, 3],
                    curve: 'straight'
                },
                series: [{
                    name: "Target",
                    data: [@(Model.ChartData.Target1), @(Model.ChartData.Target2), @(Model.ChartData.Target3), @(Model.ChartData.Target4), @(Model.ChartData.Target5), @(Model.ChartData.Target6), @(Model.ChartData.Target7), @(Model.ChartData.Target8), @(Model.ChartData.Target9), @(Model.ChartData.Target10), @(Model.ChartData.Target11), @(Model.ChartData.Target12)]
                }, {
                    name: "Realisasi",
                    data: [@(Model.ChartData.Realisasi1), @(Model.ChartData.Realisasi2), @(Model.ChartData.Realisasi3), @(Model.ChartData.Realisasi4), @(Model.ChartData.Realisasi5), @(Model.ChartData.Realisasi6), @(Model.ChartData.Realisasi7), @(Model.ChartData.Realisasi8), @(Model.ChartData.Realisasi9), @(Model.ChartData.Realisasi10), @(Model.ChartData.Realisasi11), @(Model.ChartData.Realisasi12)]
                }],
                title: {
                    text: 'Target & Realisasi PAD 2025',
                    align: 'left',
                    style: {
                        fontWeight: 500,
                    },
                },
                grid: {
                    row: {
                        colors: ['transparent', 'transparent'], // takes an array which will be repeated on columns
                        opacity: 0.2
                    },
                    borderColor: '#f1f1f1'
                },
                markers: {
                    style: 'inverted',
                    size: 6
                },
                xaxis: {
                    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Des'],
                    title: {
                        text: 'Bulan'
                    }
                },
                yaxis: {
                    title: {
                        text: 'Nominal'
                    },
                    labels: {
                        formatter: function (val) {
                            return 'Rp' + val.toLocaleString('id-ID');
                        }
                    }
                },
                tooltip: {
                    y: {
                        formatter: function (val) {
                            return 'Rp' + val.toLocaleString('id-ID');
                        }
                    }
                },
                legend: {
                    position: 'top',
                    horizontalAlign: 'right',
                    floating: true,
                    offsetY: -25,
                    offsetX: -5
                },
                responsive: [{
                    breakpoint: 600,
                    options: {
                        chart: {
                            toolbar: {
                                show: false
                            }
                        },
                        legend: {
                            show: false
                        },
                    }
                }]
            }

            var chart = new ApexCharts(
                document.querySelector("#line_chart_datalabel"),
                options
            );

            chart.render();
        </script>
        <script>

            $(document).ready(function () {
                fnSeriesPajakDaerah();
                fnJumlahObjekPajakTahunan();
                fnPemasanganAlatRekamDetail();
                fnPemasanganAlatRekamSeries();
                fnPemeriksaanPajak();
                fnPengedokanPajak();
                fnDataKontrolPotensiOp();
                fnDataPiutang();
                fnDataMutasi();
            });

            function fnSeriesPajakDaerah()
            {
                $.ajax({
                  url: '@(Url.Action("SeriesPajakDaerah"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-SeriesPajakDaerah').show();
                     $('#SeriesPajakDaerah').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-SeriesPajakDaerah').hide();
                            $('#SeriesPajakDaerah').show();
                            $('#SeriesPajakDaerah').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-SeriesPajakDaerah').hide();
                     $('#SeriesPajakDaerah').hide();
                     $('#SeriesPajakDaerah').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }
            function fnJumlahObjekPajakTahunan()
            {
                $.ajax({
                  url: '@(Url.Action("JumlahObjekPajakTahunan"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-JumlahObjekPajakTahunan').show();
                     $('#JumlahObjekPajakTahunan').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-JumlahObjekPajakTahunan').hide();
                            $('#JumlahObjekPajakTahunan').show();
                            $('#JumlahObjekPajakTahunan').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-JumlahObjekPajakTahunan').hide();
                     $('#JumlahObjekPajakTahunan').hide();
                     $('#JumlahObjekPajakTahunan').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }
            function fnJumlahObjekPajakSeries()
            {
                $.ajax({
                  url: '@(Url.Action("JumlahObjekPajak"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-JumlahObjekPajakSeries').show();
                     $('#JumlahObjekPajakSeries').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-JumlahObjekPajakSeries').hide();
                            $('#JumlahObjekPajakSeries').show();
                            $('#JumlahObjekPajakSeries').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-JumlahObjekPajakSeries').hide();
                     $('#JumlahObjekPajakSeries').hide();
                     $('#JumlahObjekPajakSeries').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }
            function fnPemasanganAlatRekamDetail()
            {
                $.ajax({
                  url: '@(Url.Action("PemasanganAlatRekamDetail"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-PemasanganAlatRekamDetail').show();
                     $('#PemasanganAlatRekamDetail').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-PemasanganAlatRekamDetail').hide();
                            $('#PemasanganAlatRekamDetail').show();
                            $('#PemasanganAlatRekamDetail').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-PemasanganAlatRekamDetail').hide();
                     $('#PemasanganAlatRekamDetail').hide();
                     $('#PemasanganAlatRekamDetail').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }
            function fnPemasanganAlatRekamSeries()
            {
                $.ajax({
                  url: '@(Url.Action("PemasanganAlatRekamSeries"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-PemasanganAlatRekamSeries').show();
                     $('#PemasanganAlatRekamSeries').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-PemasanganAlatRekamSeries').hide();
                            $('#PemasanganAlatRekamSeries').show();
                            $('#PemasanganAlatRekamSeries').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-PemasanganAlatRekamSeries').hide();
                     $('#PemasanganAlatRekamSeries').hide();
                     $('#PemasanganAlatRekamSeries').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }
            function fnPemeriksaanPajak()
            {
                $.ajax({
                  url: '@(Url.Action("PemeriksaanPajak"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-PemeriksaanPajak').show();
                     $('#PemeriksaanPajak').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-PemeriksaanPajak').hide();
                            $('#PemeriksaanPajak').show();
                            $('#PemeriksaanPajak').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-PemeriksaanPajak').hide();
                     $('#PemeriksaanPajak').hide();
                     $('#PemeriksaanPajak').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }
            function fnPengedokanPajak()
            {
                $.ajax({
                  url: '@(Url.Action("PengedokanPajak"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-PengedokanPajak').show();
                     $('#PengedokanPajak').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-PengedokanPajak').hide();
                            $('#PengedokanPajak').show();
                            $('#PengedokanPajak').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-PengedokanPajak').hide();
                     $('#PengedokanPajak').hide();
                     $('#PengedokanPajak').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }
            function fnDataKontrolPotensiOp()
            {
                $.ajax({
                  url: '@(Url.Action("DataKontrolPotensiOp"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-DataKontrolPotensiOp').show();
                     $('#DataKontrolPotensiOp').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-DataKontrolPotensiOp').hide();
                            $('#DataKontrolPotensiOp').show();
                            $('#DataKontrolPotensiOp').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-DataKontrolPotensiOp').hide();
                     $('#DataKontrolPotensiOp').hide();
                     $('#DataKontrolPotensiOp').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }
            function fnDataPiutang()
            {
                $.ajax({
                  url: '@(Url.Action("DataPiutang"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-DataPiutang').show();
                     $('#DataPiutang').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-DataPiutang').hide();
                            $('#DataPiutang').show();
                            $('#DataPiutang').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-DataPiutang').hide();
                     $('#DataPiutang').hide();
                     $('#DataPiutang').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }
            function fnDataMutasi()
            {
                $.ajax({
                  url: '@(Url.Action("DataMutasi"))',
                  type: 'GET',
                  beforeSend: function () {
                     $('#loading2-DataMutasi').show();
                     $('#DataMutasi').hide();
                  },
                  success: function (response) {
                        if (response.Status === undefined) {
                            $('#loading2-DataMutasi').hide();
                            $('#DataMutasi').show();
                            $('#DataMutasi').html(response);
                        }
                        else {
                            swal.fire({
                                icon: 'warning',
                                title: '<b style="color:orange">Peringatan</b>',
                                text: response.Message
                            })
                        }
                  },
                  error: function (xhr, status, error) {
                     $('#loading2-DataMutasi').hide();
                     $('#DataMutasi').hide();
                     $('#DataMutasi').html('<p class="text-danger">Terjadi kesalahan saat memuat data.</p>');
                  }
               });
            }

        </script>
        <script>
            function detailPiutangCellTemplate(cellElement, cellInfo) {
                const enumPajak = cellInfo.data.EnumPajak;
                const tahun = cellInfo.column.dataField;

                const button = $('<button>')
                    .addClass('btn btn-sm btn-outline-primary me-2')
                    .attr('title', 'Lihat Detail')
                    .html('<i class="ri-search-line"></i>')
                    .on('click', function () {
                        ondetailPiutangClick(enumPajak, tahun);
                    });

                const span = $('<span>').text((cellInfo.value || 0).toLocaleString('id-ID'));

                const wrapper = $('<div>')
                    .css({ display: 'flex', alignItems: 'center', justifyContent: 'space-between' })
                    .append(button)
                    .append(span);

                $(cellElement).append(wrapper);
            }

            function ondetailPiutangClick(enumPajak, tahun) {
                const $modal = $("#detailModal");

                $modal.find(".modal-title").text(`Detail Piutang - Tahun ${tahun}`);
                $modal.find(".modal-body").html(`
                    <div class="text-center my-3">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                `);

                $modal.modal("show");

                $.ajax({
                    url: '/Dashboard/DetailPiutang',
                    type: 'GET',
                    data: {
                        enumPajak: enumPajak,
                        tahun: tahun
                        // jika ada kategori, tambahkan juga di sini
                        // kategori: kategori
                    },
                    success: function (response) {
                        $modal.find(".modal-body").html(response);
                    },
                    error: function () {
                        $modal.find(".modal-body").html(`
                            <div class="alert alert-danger">
                                Gagal memuat detail data.
                            </div>
                        `);
                    }
                });
            }


        </script>
    }
