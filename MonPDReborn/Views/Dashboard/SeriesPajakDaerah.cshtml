@using static MonPDReborn.Models.DashboardVM
@model MonPDReborn.Models.DashboardVM.SeriesPajakDaerah

@{
    var currentYear = DateTime.Now.Year;
    var tahun1 = (currentYear-4).ToString();
    var tahun2 = (currentYear-3).ToString();
    var tahun3 = (currentYear-2).ToString();
    var tahun4 = (currentYear-1).ToString();
    var tahun5 = currentYear.ToString();
}

@(
    Html.DevExtreme().DataGrid<ViewModel.SeriesPajakDaerah>()
    .ID("dg-pajakDaerah")
    .ShowBorders(true)
    .ShowColumnHeaders(true)
    .ShowColumnLines(true)
    .ShowRowLines(true)
    .ColumnAutoWidth(true)
    .SearchPanel(s => s.Visible(true).HighlightCaseSensitive(false))
    .FilterRow(f => f.Visible(true))
    .HeaderFilter(h => h.Visible(true))
    .Sorting(s => s.Mode(GridSortingMode.Multiple))
    .AllowColumnResizing(true)
    .DataSource(new object[0])
    .KeyExpr("ID")
    .Columns(columns =>
    {
        columns.Add()
            .Caption("JENIS PAJAK")
            .Fixed(true)
            .FixedPosition(HorizontalEdge.Left);

        columns.Add()
            .Caption(tahun1)
            .Columns(subColumns =>
            {
                subColumns.AddFor(x => x.Target1).Caption("TARGET");
                subColumns.AddFor(x => x.Realisasi1).Caption("REALISASI");
                subColumns.AddFor(x => x.Persentase1).Caption("%");
            });

        columns.Add()
            .Caption(tahun2)
            .Columns(subColumns =>
            {
                subColumns.AddFor(x => x.Target2).Caption("TARGET");
                subColumns.AddFor(x => x.Realisasi2).Caption("REALISASI");
                subColumns.AddFor(x => x.Persentase2).Caption("%");
            });

        columns.Add()
            .Caption(tahun3)
            .Columns(subColumns =>
            {
                subColumns.AddFor(x => x.Target3).Caption("TARGET");
                subColumns.AddFor(x => x.Realisasi3).Caption("REALISASI");
                subColumns.AddFor(x => x.Persentase3).Caption("%");
            });

        columns.Add()
            .Caption(tahun4)
            .Columns(subColumns =>
            {
                subColumns.AddFor(x => x.Target4).Caption("TARGET");
                subColumns.AddFor(x => x.Realisasi4).Caption("REALISASI");
                subColumns.AddFor(x => x.Persentase4).Caption("%");
            });

        columns.Add()
            .Caption(tahun5)
            .Columns(subColumns =>
            {
                subColumns.AddFor(x => x.Target5).Caption("TARGET");
                subColumns.AddFor(x => x.Realisasi5).Caption("REALISASI");
                subColumns.AddFor(x => x.Persentase5).Caption("%");
            });
  
    })
    .Summary(s => {
    s.TotalItems(items => {
        items.AddFor(x => x.Target1)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Realisasi1)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Persentase1)
            .SummaryType(SummaryType.Avg)
            .DisplayFormat("Rata-rata: {0:n2}%");

        items.AddFor(x => x.Target2)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Realisasi2)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Persentase2)
            .SummaryType(SummaryType.Avg)
            .DisplayFormat("Rata-rata: {0:n2}%");

        items.AddFor(x => x.Target3)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Realisasi3)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Persentase3)
            .SummaryType(SummaryType.Avg)
            .DisplayFormat("Rata-rata: {0:n2}%");

        items.AddFor(x => x.Target4)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Realisasi4)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Persentase4)
            .SummaryType(SummaryType.Avg)
            .DisplayFormat("Rata-rata: {0:n2}%");

        items.AddFor(x => x.Target5)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Realisasi5)
            .SummaryType(SummaryType.Sum)
            .DisplayFormat("Total: {0:n0}");

        items.AddFor(x => x.Persentase5)
            .SummaryType(SummaryType.Avg)
            .DisplayFormat("Rata-rata: {0:n2}%");
    });
})
)