@using static MonPDReborn.Models.DashboardVM
@model MonPDReborn.Models.DashboardVM.SeriesPajakDaerah

@{
    var currentYear = DateTime.Now.Year;
    var tahun1 = (currentYear-4).ToString();
    var tahun2 = (currentYear-3).ToString();
    var tahun3 = (currentYear-2).ToString();
    var tahun4 = (currentYear-1).ToString();
    var tahun5 = currentYear.ToString();
}

@(
    Html.DevExtreme().DataGrid<ViewModel.SeriesPajakDaerah>()
    .ID("dg-pajakDaerah")
    .ShowBorders(true)
    .ShowColumnHeaders(true)
    .ShowColumnLines(true)
    .ShowRowLines(true)
    .ColumnAutoWidth(true)
    .SearchPanel(s => s.Visible(true).HighlightCaseSensitive(false))
    .FilterRow(f => f.Visible(true))
    .HeaderFilter(h => h.Visible(true))
    .Sorting(s => s.Mode(GridSortingMode.Multiple))
    .AllowColumnResizing(true)
    .DataSource(new object[0])
    .KeyExpr("ID")
    .Columns(columns =>
    {
        columns.Add()
            .Caption("JENIS PAJAK")
            .Fixed(true)
            .FixedPosition(HorizontalEdge.Left);

        columns.Add()
            .Caption(tahun1)
            .Columns(subColumns =>
            {
                subColumns.AddFor(x => x.Target1).Caption("TARGET");
                subColumns.AddFor(x => x.Realisasi1).Caption("REALISASI");
                subColumns.AddFor(x => x.Persentase1).Caption("%");
            });

        columns.Add()
            .Caption(tahun2)
            .Columns(subColumns =>
            {
                subColumns.AddFor(x => x.Target2).Caption("TARGET");
                subColumns.AddFor(x => x.Realisasi2).Caption("REALISASI");
                subColumns.AddFor(x => x.Persentase2).Caption("%");
            });
        
    })
    .Summary(s => {
        @* for (int year = startYear; year <= endYear; year++)
        {
            s.TotalItems(items =>
            {
                items.Add()
                    .Column($"Target{year}")
                    .SummaryType(SummaryType.Sum)
                    .DisplayFormat("Total: {0:c}");

                items.Add()
                    .Column($"Realisasi{year}")
                    .SummaryType(SummaryType.Sum)
                    .DisplayFormat("Total: {0:c}");

                items.Add()
                    .Column($"Persentase{year}")
                    .SummaryType(SummaryType.Avg)
                    .DisplayFormat("Rata-rata: {0:p2}");
            });
        } *@
    })
)