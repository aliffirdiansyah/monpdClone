@using MonPDReborn.Models.AktivitasOP
@model RealisasiControlVM.Detail


<div class="table-responsive">
    <table class="table table-bordered table-striped table-sm">
        <thead>
            <tr>
                <th rowspan="2" class="text-center align-middle">NO</th>
                <th rowspan="2" class="text-center align-middle">JENIS PAJAK</th>
                <th colspan="3" class="text-center">UPTB 1</th>
                <th colspan="3" class="text-center">UPTB 2</th>
                <th colspan="3" class="text-center">UPTB 3</th>
                <th colspan="3" class="text-center">UPTB 4</th>
                <th colspan="3" class="text-center">UPTB 5</th>
                <th colspan="3" class="text-center">BIDANG</th>
            </tr>
            <tr>
                @for (int i = 0; i < 6; i++)
                {
                    <th class="text-center">Target</th>
                    <th class="text-center">Realisasi</th>
                    <th class="text-center">%</th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.DataDetailList.OrderBy(x => x.No).ToList())
            {
                <tr>
                    <td class="text-center">@item.No</td>
                    <td>@item.JenisPajak</td>

                    <td class="text-end">@item.UPTB1.Target.ToString("#,##0")</td>
                    <td class="text-end">@item.UPTB1.Realisasi.ToString("#,##0")</td>
                    <td class="text-end">@string.Format("{0:0.00}%", item.UPTB1.Persen)</td>

                    <td class="text-end">@item.UPTB2.Target.ToString("#,##0")</td>
                    <td class="text-end">@item.UPTB2.Realisasi.ToString("#,##0")</td>
                    <td class="text-end">@string.Format("{0:0.00}%", item.UPTB2.Persen)</td>

                    <td class="text-end">@item.UPTB3.Target.ToString("#,##0")</td>
                    <td class="text-end">@item.UPTB3.Realisasi.ToString("#,##0")</td>
                    <td class="text-end">@string.Format("{0:0.00}%", item.UPTB3.Persen)</td>

                    <td class="text-end">@item.UPTB4.Target.ToString("#,##0")</td>
                    <td class="text-end">@item.UPTB4.Realisasi.ToString("#,##0")</td>
                    <td class="text-end">@string.Format("{0:0.00}%", item.UPTB4.Persen)</td>

                    <td class="text-end">@item.UPTB5.Target.ToString("#,##0")</td>
                    <td class="text-end">@item.UPTB5.Realisasi.ToString("#,##0")</td>
                    <td class="text-end">@string.Format("{0:0.00}%", item.UPTB5.Persen)</td>

                    <td class="text-end">@item.Bidang.Target.ToString("#,##0")</td>
                    <td class="text-end">@item.Bidang.Realisasi.ToString("#,##0")</td>
                    <td class="text-end">@string.Format("{0:0.00}%", item.Bidang.Persen)</td>
                </tr>
            }
        </tbody>
        <tfoot>
            <tr>
                <th colspan="2" class="text-center">TOTAL</th>

                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB1.Target).ToString("#,##0")
                </th>
                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB1.Realisasi).ToString("#,##0")
                </th>
                <th class="text-end">
                    @(Model.DataDetailList.Count > 0
                                        ? (Model.DataDetailList.Sum(x => x.UPTB1.Realisasi) / Model.DataDetailList.Sum(x => x.UPTB1.Target) * 100).ToString("n2") + "%"
                                        : "0.00%")
                </th>

                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB2.Target).ToString("#,##0")
                </th>
                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB2.Realisasi).ToString("#,##0")
                </th>
                <th class="text-end">
                    @(Model.DataDetailList.Count > 0
                                        ? (Model.DataDetailList.Sum(x => x.UPTB2.Realisasi) / Model.DataDetailList.Sum(x => x.UPTB2.Target) * 100).ToString("n2") + "%"
                                        : "0.00%")
                </th>

                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB3.Target).ToString("#,##0")
                </th>
                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB3.Realisasi).ToString("#,##0")
                </th>
                <th class="text-end">
                    @(Model.DataDetailList.Count > 0
                                        ? (Model.DataDetailList.Sum(x => x.UPTB3.Realisasi) / Model.DataDetailList.Sum(x => x.UPTB3.Target) * 100).ToString("n2") + "%"
                                        : "0.00%")
                </th>

                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB4.Target).ToString("#,##0")
                </th>
                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB4.Realisasi).ToString("#,##0")
                </th>
                <th class="text-end">
                    @(Model.DataDetailList.Count > 0
                                        ? (Model.DataDetailList.Sum(x => x.UPTB4.Realisasi) / Model.DataDetailList.Sum(x => x.UPTB4.Target) * 100).ToString("n2") + "%"
                                        : "0.00%")
                </th>

                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB5.Target).ToString("#,##0")
                </th>
                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.UPTB5.Realisasi).ToString("#,##0")
                </th>
                <th class="text-end">
                    @(Model.DataDetailList.Count > 0
                                        ? (Model.DataDetailList.Sum(x => x.UPTB5.Realisasi) / Model.DataDetailList.Sum(x => x.UPTB5.Target) * 100).ToString("n2") + "%"
                                        : "0.00%")
                </th>

                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.Bidang.Target).ToString("#,##0")
                </th>
                <th class="text-end">
                    @Model.DataDetailList.Sum(x => x.Bidang.Realisasi).ToString("#,##0")
                </th>
                <th class="text-end">
                    @(Model.DataDetailList.Count > 0
                                        ? (Model.DataDetailList.Sum(x => x.Bidang.Realisasi) / Model.DataDetailList.Sum(x => x.Bidang.Target) * 100).ToString("n2") + "%"
                                        : "0.00%")
                </th>
            </tr>
        </tfoot>


    </table>

</div>
