@using System.Globalization
@model MonPDReborn.Models.AktivitasOP.PendataanObjekPajakVM.SubDetail



@if (Model.DataRestoranList != null && Model.DataRestoranList.Count > 0)
{
    int no = 1;


    // Ambil agregat dari Model.DataRestoranList
    var totalMeja = Model.DataRestoranList.FirstOrDefault().JmlMeja;
    var totalKursi = Model.DataRestoranList.FirstOrDefault().JmlKursi;
    var rataPengunjung = Model.DataRestoranList.FirstOrDefault().RataPengunjung;
    var rataBill = Model.DataRestoranList.FirstOrDefault().RataBill;


    <div class="col-lg-12">
        <div class="card border border-primary border-2">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <div class="d-flex p-3">
                            <div class="flex-shrink-0">
                                <div class="avatar-md me-3">
                                    <span class="avatar-title bg-soft-primary border border-2 border-primary rounded-circle fs-1">
                                        <i class="ri-restaurant-line text-primary"></i>
                                    </span>
                                </div>
                            </div>
                            <div class="mt-1">
                                <h4 class="fs-16 fw-semibold text-dark">
                                    @Model.DataRestoranList.FirstOrDefault().ObjekPajak
                                </h4>
                                <p class="fs-16 lh-base text-dark mb-1">
                                    @Model.DataRestoranList.FirstOrDefault().Alamat
                                </p>
                                <p class="fs-16 text-dark">
                                    @Model.DataRestoranList.FirstOrDefault().FormattedNOP
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-3">
            <div class="card border border-primary border-2">
                <div class="card-body">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Jumlah Meja
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @totalMeja
                        </h4>
                    </div>
                    
                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="card border border-primary border-2">
                <div class="card-body">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Jumlah Kursi
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @totalKursi
                        </h4>
                    </div>
                    
                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="card border border-primary border-2">
                <div class="card-body">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Rata-rata Pengunjung
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @rataPengunjung.ToString("n0")
                        </h4>
                    </div>
                    
                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="card border border-primary border-2">
                <div class="card-body">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Rata-rata Bill
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            Rp. @rataBill.ToString("n0")
                        </h4>
                    </div>
                    
                </div>
            </div>
        </div>

    </div>

    <!-- Loop Data Restoran -->
    
        <div class="row">
            @foreach (var data in Model.DataRestoranList)
    {
            <div class="col-lg-4">
                <div class="card shadow-sm border-0 rounded-4 mb-4">
                    <div class="card-body">
                        <!-- Header -->
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div class="d-flex align-items-center gap-3">
                                <!-- Nomor urut -->
                                <div class="bg-primary text-white rounded-circle d-flex justify-content-center align-items-center shadow"
                                     style="width: 48px; height: 48px;">
                                    <strong class="fs-5">@no</strong>
                                </div>

                                <!-- Info Pajak -->
                                <div>
                                    <h5 class="mb-0 fw-semibold">@data.ObjekPajak</h5>
                                    <small class="text-muted">
                                        <i class="mdi mdi-calendar-clock me-1"></i>
                                        @data.Tgl.ToString("dddd, dd MMM yyyy", new CultureInfo("id-ID"))
                                    </small>
                                </div>
                            </div>

                            <!-- Nominal Bill -->
                            <div class="text-end">
                                <div class="text-muted fs-8">Jumlah Nominal Bill</div>
                                <div class="fw-bold fs-5 text-success">
                                    Rp @data.Bill.ToString("n0")
                                </div>
                            </div>
                        </div>

                        <!-- Statistik Pengunjung -->
                        <div class="row text-sm mb-4">
                            <div class="col-lg-12">
                                <div class="card border border-primary border-2">
                                    <div class="card-body">
                                        <div class="p-1">
                                            <h4 class="fs-16 fw-semibold mb-4">
                                                Jumlah Pengunjung
                                            </h4>
                                            <h4 class="fs-16 fw-semibold mb-1">
                                                @data.JmlPengunjung
                                            </h4>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            no++;
        }
        </div>
        

        
   

}

else if (Model.DataParkirList != null && Model.DataParkirList.Count > 0)
{
    int no = 1;

    <div class="col-lg-12">
        <div class="card border border-secondary border-2">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <div class="d-flex p-3">
                            <div class="flex-shrink-0">
                                <div class="avatar-md me-3">
                                    <span class="avatar-title bg-soft-secondary rounded-circle fs-1">
                                        <i class="ri-parking-line text-secondary"></i>
                                    </span>
                                </div>
                            </div>
                            <div class="mt-1">
                                <h4 class="fs-16 fw-semibold text-dark">
                                @Model.DataParkirList.FirstOrDefault().ObjekPajak
                                </h4>
                                <p class="fs-16 lh-base text-dark mb-1">
                                @Model.DataParkirList.FirstOrDefault().Alamat
                                </p>
                                <p class="fs-16 text-dark">
                                @Model.DataParkirList.FirstOrDefault().FormattedNOP
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-6">
            <div class="card border border-secondary border-2">
                <div class="card-body">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Kapasitas Motor
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().KapasitasMotor.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card border border-secondary border-2">
                <div class="card-body">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Kapasitas Mobil
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().KapasitasMobil.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-2">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Est Motor
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().EstMotor.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Est Mobil
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().EstMobil.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-2">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Est Mobil Box
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().EstMobilBox.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Est Truk
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().EstTruk.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-2">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Est Trailer
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().EstTrailer.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-2">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Tarif Motor
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().TarifMotor.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Tarif Mobil
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().TarifMobil.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-2">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Tarif Mobil Box
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().TarifMobilBox.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Tarif Truk
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().TarifTruk.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

        <div class="col-lg-2">
            <div class="card border border-secondary border-2">
                <div class="card-body bg-light">
                    <div class="p-1">
                        <h4 class="fs-16 fw-semibold mb-4">
                            Tarif Trailer
                        </h4>
                        <h4 class="fs-16 fw-semibold mb-1">
                            @Model.DataParkirList.FirstOrDefault().TarifTrailer.ToString("n0")
                        </h4>
                    </div>

                </div>
            </div>
        </div>

    </div>
    <div class="row">
         @foreach (var data in Model.DataParkirList)
        {
            <div class="col-lg-12">
                <div class="card shadow-sm border-0 rounded-4 mb-4">
                    <div class="card-body">
                        <!-- Header -->
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div class="d-flex align-items-center gap-3">
                                <div class="bg-primary text-white rounded-circle d-flex justify-content-center align-items-center shadow" style="width: 48px; height: 48px;">
                                    <strong class="fs-5">@no</strong>
                                </div>
                                <div>
                                    <h5 class="mb-0 fw-semibold">@data.ObjekPajak</h5>
                                    <small class="text-muted">
                                        <i class="mdi mdi-calendar-clock me-1"></i>
                                        @data.Tgl.ToString("dddd, dd MMM yyyy", new CultureInfo("id-ID"))
                                    </small>
                                </div>
                            </div>
                            <div class="text-end">
                                <div class="text-muted small">Jenis Biaya Parkir</div>
                                <div class="fw-bold fs-5 text-success">@data.JenisBiaya</div>
                            </div>
                        </div>


                        <!-- Kapasitas -->
                        <div class="row text-sm mb-3">
                            <div class="col-md-2 mb-2">
                                <div class="p-3 border rounded bg-light">
                                    <h4 class="fs-14 fw-semibold mb-2">Jumlah Motor</h4>
                                    <div class="fw-bold">@data.JmlMotor.ToString("n0")</div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-2">
                                <div class="p-3 border rounded bg-light">
                                    <h4 class="fs-14 fw-semibold mb-2">Jumlah Mobil</h4>
                                    <div class="fw-bold">@data.JmlMobil.ToString("n0")</div>
                                </div>
                            </div>
                            <div class="col-md-2 mb-2">
                                <div class="p-3 border rounded bg-light">
                                    <h4 class="fs-14 fw-semibold mb-2">Jumlah Mobil Box</h4>
                                    <div class="fw-bold">@data.JmlMobilBox.ToString("n0")</div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-2">
                                <div class="p-3 border rounded bg-light">
                                    <h4 class="fs-14 fw-semibold mb-2">Jumlah Truk</h4>
                                    <div class="fw-bold">@data.JmlTruk.ToString("n0")</div>
                                </div>
                            </div>
                            <div class="col-md-2 mb-2">
                                <div class="p-3 border rounded bg-light">
                                    <h4 class="fs-14 fw-semibold mb-2">Jumlah Trailer</h4>
                                    <div class="fw-bold">@data.JmlTrailer.ToString("n0")</div>
                                </div>
                            </div>
                        </div>

                        <div class="row text-sm mb-4">
                            <div class="col-md-12">
                                <div class="p-3 border border-5 rounded bg-warning-subtle text-warning text-center">
                                    <div class="fs-10">Potensi Hasil Pengedokan</div>
                                    <strong>Rp @data.PotensiHasilPengedokan.ToString("n0")</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                
            </div>
            no++;
        }
    </div>
   
       
}
else
{
    <div class="alert alert-warning">
        Data tidak tersedia.
    </div>
}

