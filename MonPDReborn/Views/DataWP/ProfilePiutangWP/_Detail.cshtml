@model MonPDReborn.Models.DataWP.ProfilePiutangWPVM.Detail

<div class="modal-header">
    <h5 class="modal-title d-flex align-items-center">
        <i class="ri-building-3-fill fs-4 me-2"></i>
        <span>Detail Piutang Wajib Pajak</span>
    </h5>

    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<div class="modal-body">
@foreach (var Detail in Model.DetailPiutangWPList)
    {
        <div class="row">

            <div class="col-lg-6">
                <div class="card-header bg-primary text-white d-flex align-items-center">
                    <i class="ri-profile-fill fs-3 me-2"></i>
                    <h4 class="mb-0 text-white">Informasi Wajib Pajak</h4>
                </div>
                <div class="card-body">
                    <div class="d-flex">
                        <p class="fs-14 text-muted flex-grow-1">NPWPD</p>
                        <div class="flex-shrink-0">
                            <p class="fs-14 fw-semibold">@Detail.NPWPD</p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <p class="fs-14 text-muted flex-grow-1">Nama</p>
                        <div class="flex-shrink-0">
                            <p class="fs-14 fw-semibold">@Detail.NamaWP</p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <p class="fs-14 text-muted flex-grow-1">Alamat</p>
                        <div class="flex-shrink-0">
                            <p class="fs-14 fw-semibold">@Detail.Alamat</p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <p class="fs-14 text-muted flex-grow-1">No Telpon</p>
                        <div class="flex-shrink-0">
                            <p class="fs-14 fw-semibold">@Detail.Telpon</p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <p class="fs-14 text-muted flex-grow-1">Total Piutang</p>
                        <div class="flex-shrink-0">
                            <p class="fs-14 fw-semibold">@Detail.TotalPiutang</p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <p class="fs-14 text-muted flex-grow-1">Status</p>
                        <div class="flex-shrink-0">
                            <p class="fs-14 fw-semibold">@Detail.StatusBayar</p>
                        </div>
                    </div>
                </div>
            </div>

             <div class="col-lg-6">
                <div class="card-header bg-primary text-white d-flex align-items-center">
                    <i class="ri-bar-chart-fill fs-3 me-2"></i>
                    <h4 class="mb-0 text-white">Analisis Tingkat Penagihan</h4>
                </div>
                <div class="card-body">
                    <div class="d-flex">
                        <p class="fs-14 text-muted flex-grow-1">Tingkat Responsivitas</p>
                        <div class="flex-shrink-0">
                            <p class="fs-14 fw-semibold">@Detail.TingkatRespon</p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <p class="fs-14 text-muted flex-grow-1">Jumlah Tindakan</p>
                        <div class="flex-shrink-0">
                            <p class="fs-14 fw-semibold">@Detail.JumlahTindakan</p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <p class="fs-14 text-muted flex-grow-1">Tindakan Terakhir</p>
                        <div class="flex-shrink-0">
                            <p class="fs-14 fw-semibold">@Detail.TindakanTerakhir</p>
                        </div>
                    </div>
                </div>
            </div>

            

        </div>     
    }
    <div class="row">

        <div class="col-lg-12">
                <div class="card">
                    <div class="card-header bg-primary text-white d-flex align-items-center">
                    <i class=" ri-history-line fs-3 me-2"></i>
                        <h4 class="mb-0 text-white">Sejarah Pembayaran</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            @(
                            Html.DevExtreme().DataGrid<MonPDReborn.Models.DataWP.ProfilePiutangWPVM.SejarahPembayaran>()
                                .ID("sejarahGrid")
                                .DataSource(Model.DetailSejarahWPList)
                                .KeyExpr("NPWPD")
                                .ShowBorders(true)
                                .ShowColumnLines(true)
                                .ShowColumnHeaders(true)
                                .AllowColumnResizing(true)
                                .ShowRowLines(true)
                                .ColumnAutoWidth(true)
                                .SearchPanel(s => s.Visible(true).HighlightCaseSensitive(false))
                                .FilterRow(f => f.Visible(true))
                                .HeaderFilter(h => h.Visible(true))
                                .Sorting(s => s.Mode(GridSortingMode.Multiple))
                                .Paging(p => p.PageSize(10))
                                .Pager(pager =>
                                {
                                    pager.ShowPageSizeSelector(true);
                                    pager.AllowedPageSizes(new[] { 10, 20, 50 });
                                    pager.ShowInfo(true);
                                })
                                .Columns(columns => {

                                    columns.AddFor(m => m.JenisPajak)
                                        .Caption("Jenis Pajak");

                                    columns.AddFor(m => m.NamaOP)
                                        .Caption("Nama OP");

                                    columns.AddFor(m => m.Piutang)
                                        .Caption("Piutang");

                                    columns.AddFor(m => m.Terbayar)
                                        .Caption("Terbayar");

                                    columns.AddFor(m => m.TanggalSejarah)
                                        .Caption("Tanggal");

                                    columns.AddFor(m => m.Keterangan)
                                        .Caption("Keterangan");
                                })
                        )
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header bg-primary text-white d-flex align-items-center">
                    <i class=" ri-refresh-fill fs-3 me-2"></i>
                        <h4 class="mb-0 text-white">Riwayat Upaya Penagihan</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            @(
                            Html.DevExtreme().DataGrid<MonPDReborn.Models.DataWP.ProfilePiutangWPVM.RiwayatUpaya>()
                                .ID("upayaGrid")
                                .DataSource(Model.DetailUpayaWPList)
                                .KeyExpr("NPWPD")
                                .ShowBorders(true)
                                .ShowColumnLines(true)
                                .ShowColumnHeaders(true)
                                .AllowColumnResizing(true)
                                .ShowRowLines(true)
                                .ColumnAutoWidth(true)
                                .SearchPanel(s => s.Visible(true).HighlightCaseSensitive(false))
                                .FilterRow(f => f.Visible(true))
                                .HeaderFilter(h => h.Visible(true))
                                .Sorting(s => s.Mode(GridSortingMode.Multiple))
                                .Paging(p => p.PageSize(10))
                                .Pager(pager =>
                                {
                                    pager.ShowPageSizeSelector(true);
                                    pager.AllowedPageSizes(new[] { 10, 20, 50 });
                                    pager.ShowInfo(true);
                                })
                                .Columns(columns => {

                                    columns.AddFor(m => m.TanggalRiwayat)
                                        .Caption("Tanggal");

                                    columns.AddFor(m => m.JenisTindakan)
                                        .Caption("Jenis Tindakan");

                                    columns.AddFor(m => m.status)
                                        .Caption("Status");

                                    columns.AddFor(m => m.Petugas)
                                        .Caption("Petugas");
                                })
                        )
                        </div>
                    </div>
                </div>
            </div>

        <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-warning">
                <i class=" ri-mail-line me-1"></i> Kirim Surat Teguran
            </button>
            <button type="button" class="btn btn-primary">
                <i class="ri-phone-line me-1"></i> Hubungi WP
            </button>
            <button type="button" class="btn btn-success">
                <i class="ri-time-line me-1"></i> Jadwalkan Kunjungan
            </button>
            <button type="button" class="btn btn-danger">
                <i class=" ri-mail-forbid-line me-1"></i> Proses Surat Paksa
            </button>
        </div>

    </div>
</div>
